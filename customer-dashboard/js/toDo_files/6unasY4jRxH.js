/*!CK:1396011423!*//*1400463263,178134343*/

if (self.CavalryLogger) { CavalryLogger.start_js(["0nwFz"]); }

__d("ComposerXAttachmentButtonBarState",["CSS","DOMQuery","csx","cx"],function(a,b,c,d,e,f,g,h,i,j){var k={trackCityChanges:function(l){var m=l.getComponent('citysharericon');if(m)return m.instance.subscribe('change',function(){k.updateMessageBoxBarState(l);});},updateMessageBoxBarState:function(l){var m=l.getComponent('citysharericon');if(m){var n=h.find(l.getRoot(),"._1dsp");g.conditionClass(n,"_icv",!!m.instance.getValue());}}};e.exports=k;});
__d("ComposerXAttachmentUtils",["CSS","DataStore","DOMQuery","Focus","Input","PageTransitions","Run","StickyPlaceholderInput","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p='composer_fixed_placeholder';function q(t,u){if(!h.get(t.element,p,false))t.instance.setPlaceholder(u);}function r(t,u){var v=l.getMostRecentURI(),w=l.getNextURI(),x=v.getQueryData().hasOwnProperty('theater')&&u.path===w.path;if(x||w.getQueryData().hasOwnProperty('theater')){m.onAfterLoad(function(){m.onBeforeUnload(function(){return r(t,u);});});return;}if(a.Dialog&&a.Dialog.getCurrent())return;if(t.offsetParent!==null&&!k.isEmpty(t))return "You haven't finished your post yet. Do you want to leave without finishing?";}var s={initMentions:function(t,u){q(t,u);var v=i.find(t.element,'textarea.input');j.set(v);},setStickyPlaceholderForMentions:function(t,u){if(i.contains(t.element,document.activeElement)&&g.hasClass(document.activeElement,'DOMControl_placeholder'))document.activeElement.blur();q(t,u);},setPlaceholderIsFixed:function(t,u){h.set(t.element,p,!!u);},setStickyPlaceholderForTypeahead:function(t,u){var v=i.find(t,'.textInput');n.setPlaceholderText(v,u);},registerInputForLeaveWarning:function(t){var u=l.getNextURI();m.onBeforeUnload(function(){return r(t,u);});}};e.exports=s;});
__d("DynamicIconSelector",["Button","CSS","DOM","SelectorDeprecated"],function(a,b,c,d,e,f,g,h,i,j){var k={swapIcon:function(l){var m=j.getSelectedOptions(l)[0],n=m&&i.scry(m,'.itemIcon')[0],o=j.getSelectorButton(l);if(n){g.setIcon(o,n.cloneNode(true));}else{var p=i.scry(o,'.img')[0];p&&i.remove(p);}h.conditionClass(o,'uiSelectorChevronOnly',!n);}};j.subscribe('change',function(l,m){var n=m.selector;if(h.hasClass(n,'dynamicIconSelector'))k.swapIcon(n);});e.exports=k;});
__d("PrivacySelectorOption",["Arbiter","AudienceSelectorTags","CSS","CurrentUser","DOM","DynamicIconSelector","Parent","PrivacyConst","SelectorDeprecated","copyProperties","csx","fbt","intlList","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(v,w){if(!v)throw new Error("there's no DOM option. Config data: ",w);this._elem=v;this._selector=m.byClass(this._elem,'audienceSelector');if(!this._selector)return;this._priv_base_val=w.priv_base_val;this._audienceCount=w.audience_count||"";this._hasRestricted=w.has_restricted||false;this._isCustom=w.is_custom||false;this._includedAudience=w.included||"";this._excludedAudience=w.excluded||{};this._excludedTaggees={};this._tagExpansionBehavior=w.tag_expansion_behavior||n.TagExpansion.NONE;this._plusLabel=k.scry(v,'.plusLabel')[0];this._audienceCountLabel=k.scry(v,'.audienceCountLabel')[0];this._taggedIDs=[];this._tags=[];this._recalculateTooltipAndLabel();this._updateOptionCountLabel();this._updateSelector();g.subscribe('Composer/changedtags',function(x,y){var z=i.hasClass(this._selector,'composerAudienceSelector');if(!this._getChangedData()||!z)return;this._tags=[];this._taggedIDs=[];for(var aa=0;aa<y.withTags.length;aa++){var ba=y.withTags[aa].info;if(ba.uid!=j.getID()){this._tags.push(ba.text);this._taggedIDs.push(ba.uid);}}for(aa in y.mention)if(y.mention[aa].type=='user'&&y.mention[aa].uid!=j.getID()){this._tags.push(y.mention[aa].text);this._taggedIDs.push(y.mention[aa].uid);}var ca=k.scry(document.body,"._5l7q")[0];ca&&!!this._taggedIDs.length&&i.hide(ca);this._updateOptionCountLabel();var da=this._recalculateTooltipAndLabel();if(da&&o.isOptionSelected(this._elem)){this._updateSelector();g.inform('SelectedPrivacyOption/changed',this._getChangedData());}}.bind(this));o.listen(this._selector,'change',this._updateSelector.bind(this));}p(u.prototype,{updateOption:function(v,w,x,y,z){this._priv_base_val=v;this._includedAudience=w;this._excludedAudience=x;this._tagExpansionBehavior=y;this._audienceCount=z;this._recalculateTooltipAndLabel();this._updateOptionCountLabel();return {label:this._label,tooltip:this._tooltip};},_recalculateTooltipAndLabel:function(){var v=this._label;this._label=this._getNewSelectorLabel();var w=this._tooltip;this._tooltip=this._getNewTooltip();return (w!=this._tooltip)||(v!=this._label);},_getNewTooltip:function(){if(this._isCustom)return this._recalcCustomTooltip();switch(this._priv_base_val){case n.FriendsValue.ALL_FRIENDS:return this._recalcFriendsTooltip();case n.FriendsValue.FRIENDS_MINUS_ACQUAINTANCES:return this._recalcFriendsMinusTooltip();case n.FriendsValue.SELF:var v=this._getTagExpansionText();return v?v:this._getIncludedAudience();default:return this._recalcCustomTooltip();}},_getNewSelectorLabel:function(){var v=this._elem.getAttribute('data-label').replace(/\(.*\)/,"");if(this._showAudienceCount()){var w=' ('+this._audienceCount+')';v+=w;}if(this._isTagExpanded())v+=' (+)';return v;},_updateOptionCountLabel:function(){if(this._audienceCountLabel){if(this._showAudienceCount()){var v=' ('+this._audienceCount+')';k.setContent(this._audienceCountLabel,v);}i.conditionShow(this._audienceCountLabel,this._showAudienceCount());}this._plusLabel&&i.conditionShow(this._plusLabel,this._isTagExpanded());},_getChangedData:function(){return {tags:this._taggedIDs,privacy:this._priv_base_val};},_showAudienceCount:function(){return (this._audienceCountLabel&&this._audienceCount&&this._audienceCount.length>0);},_isTagExpanded:function(){var v=this._getTagExpansionBehavior(),w=!!this._taggedIDs.length||this._alreadyHasTags();return (w&&v!=n.TagExpansion.NONE);},_alreadyHasTags:function(){var v=k.scry(this._selector,'*[data-oid]')[0];v=v&&v.getAttribute('data-oid');return v&&h.hasTags(v);},_updateSelector:function(){if(o.isOptionSelected(this._elem)){var v=i.hasClass(this._selector,'composerAudienceSelector');v&&o.setButtonLabel(this._selector,this._label);o.setButtonTooltip(this._selector,this._tooltip);l.swapIcon(this._selector);return false;}return true;},_isSharedAlbum:function(){var v=k.scry(this._selector,'*[data-shared-album]')[0];return v&&v.getAttribute('data-shared-album');},_getTagExpansionBehavior:function(){if(this._tagExpansionBehavior)return this._tagExpansionBehavior;var v=this._priv_base_val===n.FriendsValue.SELF,w=this._priv_base_val===n.FriendsValue.EVERYONE;if((v&&this._isSharedAlbum())||w){return n.TagExpansion.NONE;}else if(this._priv_base_val<n.FriendsValue.ALL_FRIENDS)return n.TagExpansion.TAGGEES;return n.TagExpansion.FRIENDS_OF_TAGGEES;},_getTagExpansionText:function(){var v=this._getTagExpansionBehavior();if(!!this._taggedIDs.length||this._alreadyHasTags()){if(v==n.TagExpansion.FRIENDS_OF_TAGGEES){return "friends of anyone tagged";}else if(v==n.TagExpansion.TAGGEES)return "Anyone tagged";return '';}return '';},_getIncludedAudience:function(){if(this._includedAudience)return this._includedAudience;var v=this._priv_base_val===n.FriendsValue.SELF;if(v&&!this._isSharedAlbum())return "Only Me";return this._elem.getAttribute('data-label');},_getCombinedSentence:function(v,w){if(!w)return v;return r._("{list of people who can see this}; Except: {list of people who cannot see this}",[r.param("list of people who can see this",v),r.param("list of people who cannot see this",w)]);},_recalcFriendsTooltip:function(){var v=this._tags.length;if(v>2){return this._hasRestricted?"Your friends and friends of anyone tagged; Except: Restricted":"Your friends and friends of anyone tagged";}else if(v==2){if(this._hasRestricted){return t._("Your friends, {user}'s friends and {user2}'s friends; Except: Restricted ",{user:this._tags[0],user2:this._tags[1]});}else return t._("Your friends, {user}'s friends and {user2}'s friends",{user:this._tags[0],user2:this._tags[1]});}else if(v==1){if(this._hasRestricted){return t._("Your friends and {user}'s friends; Except: Restricted",{user:this._tags[0]});}else return t._("Your friends and {user}'s friends",{user:this._tags[0]});}else return this._hasRestricted?"Your friends; Except: Restricted":"Your friends";},_recalcFriendsMinusTooltip:function(){var v=this._tags.length;if(v>0||this._alreadyHasTags()){var w="friends of anyone tagged",x=r._("{people who can see this}, {list of more people who can see this}",[r.param("people who can see this","Your friends"),r.param("list of more people who can see this",w)]),y="Acquaintances";if(this._hasRestricted)y=r._("{Name of Acquaintances friend list}, {restricted}",[r.param("Name of Acquaintances friend list",y),r.param("restricted","Restricted")]);return this._getCombinedSentence(x,y);}else{if(this._hasRestricted)return "Friends; Except: Acquaintances, Restricted";return "Friends except Acquaintances";}},_recalcCustomTooltip:function(){var v=this._getIncludedAudience(),w=this._getTagExpansionText();if(w)v=r._("{list of people who can see this}, {list of additional people who can see this}",[r.param("list of people who can see this",v),r.param("list of additional people who can see this",w)]);for(var x=0;x<this._taggedIDs.length;x++){y=this._taggedIDs[x];if(y in this._excludedAudience){delete this._excludedAudience[y];this._excludedTaggees[y]=this._tags[x];break;}}for(var y in this._excludedTaggees)if(this._excludedTaggees.hasOwnProperty(y))if(this._taggedIDs.indexOf(y)===-1){this._excludedAudience[y]=this._excludedTaggees[y];delete this._excludedTaggees[y];break;}var z=[];for(x in this._excludedAudience)if(this._excludedAudience.hasOwnProperty(x))z.push(this._excludedAudience[x]);return this._getCombinedSentence(v,s(z));}});e.exports=u;});
__d("CustomPrivacyOptionController",["Arbiter","AsyncDialog","AsyncRequest","DOM","Event","Form","Parent","PrivacyConst","PrivacySelectorOption","SelectorDeprecated","XPrivacyCustomDialogControllerURIBuilder","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(t,u){if(!t)return;setTimeout((function(){this._selector=m.byClass(t,'audienceSelector');if(!this._selector)return;this.initCustomState(t,u.option_id,u.id);var v={priv_base_val:u.base_audience_value,audience_count:u.audience_count,is_custom:true,included:u.included_audience,excluded:u.excluded_audience,tag_expansion_behavior:u.tag_expansion_behavior};this._optionJSInstance=new o(t,v);k.listen(t,'click',function(event){this.openCustomDialog(event,u.option_id,u.explain_tags,u.autosave,u.limit_community,u.limit_facebook,u.limit_fof,u.limit_tagexpand,u.source);}.bind(this));p.listen(this._selector,'select',function(w){if(w.option._id!=this._id)this.clearCustomState();}.bind(this));}).bind(this),0);}r(s,{_instances:{},update:function(t,u,v,w,x,y,z,aa,ba){var ca=s._instances[t];ca._update(u,v)._updateOption(v,x,y,z,aa,ba);g.inform('Form/change',{node:ca._container});},getData:function(t){return s._instances[t]._privacyData;},setPrivacyData:function(t,u,v){s._instances[t]._update(u,v);}});r(s.prototype,{_updateOption:function(t,u,v,w,x,y){var z=p.getOption(this._selector,t)||p.getOption(this._selector,n.BaseValue.CUSTOM+''),aa=this._optionJSInstance.updateOption(u,v,w,x,y);g.inform('CustomPrivacyOptionController/update',{selector:this._selector,option:z,tooltip:aa.tooltip,label:aa.label});return this;},_update:function(t,u){var v=u==n.BaseValue.CUSTOM||!p.getOption(this._selector,u),w=this._selector.getAttribute('data-name');this.updateCustomState(t,v,w);return this;},initCustomState:function(t,u,v){s._instances[u]=this;this._container=j.find(t,'.customPrivacyInputs');this._id=v;this._privacyData={};var w=l.serialize(this._container);if(w.audience)this._privacyData=w.audience[v];return t;},openCustomDialog:function(event,t,u,v,w,x,y,z,aa){var ba=new q().setString('option_id',t).setString('id',this._id).setString('privacy_data',JSON.stringify(this._privacyData)).setBool('explain_tags',u).setBool('autosave',v).setBool('limit_community',w).setBool('limit_facebook',x).setBool('limit_fof',y).setBool('limit_tagexpand',z).setBool('is_new_privacy_selector',false).setString('source',aa).getURI(),ca=new i(ba);ca.setRelativeTo(event.getTarget());h.send(ca,function(da){da.subscribe('cancel',function(){g.inform('CustomPrivacyOptionController/cancel',{selector:this._selector});});});},updateCustomState:function(t,u,v){this.clearCustomState();this._privacyData=r({},t);if(u)if(v){v=v.slice(0,-'[value]'.length);var w={};w[v]=t;l.createHiddenInputs(w,this._container,null,true);}},clearCustomState:function(){this._privacyData={};j.empty(this._container);}});e.exports=s;});
__d("AudienceSelector",["Arbiter","AudienceSelectorTags","CSS","CustomPrivacyOptionController","DOM","DynamicIconSelector","PrivacyConst","SelectorDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o={};n.subscribe('select',function(q,r){if(!i.hasClass(r.selector,'audienceSelector'))return;var s=n.getOptionValue(r.option);r.value=s;g.inform('AudienceSelector/changed',r);if(s==m.BaseValue.CUSTOM&&!i.hasClass(r.option,'noDialog')){n.toggle(r.selector);return false;}g.inform('AudienceSelector/changedNonCustomDialogButton',r);if(i.hasClass(r.selector,'dataTooltip')){var t=k.find(r.option,'.itemAnchor').getAttribute('data-tooltip');n.setButtonTooltip(r.selector,t||null);}if(!i.hasClass(r.option,'specialOption'))return;var u=k.find(r.option,'a').getAttribute('data-type');if(i.hasClass(r.option,'moreOption')){i.addClass(r.selector,u);i.addClass(r.selector,'showSecondaryOptions');return false;}else if(i.hasClass(r.option,'returnOption')){i.removeClass(r.selector,'showSecondaryOptions');i.removeClass(r.selector,'friendList');return false;}});var p={keepSynchronized:function(q,r){o[q]||(o[q]={});o[q][r.id]=r;},setHasTags:function(q){h.setHasTags(q);},forceAndKeepSynchronized:function(q,r){p.keepSynchronized(q,r);g.inform('AudienceSelector/update',{option:n.getSelectedOptions(r)[0],selector:r});},get:function(q){var r=k.scry(q,'div.audienceSelector');if(r.length!=1)return;return r[0];},setAudience:function(q,r){var s=this.get(q);n.setSelected(s,r.toString());l.swapIcon(s);var t=n.getSelectedOptions(s);g.inform('AudienceSelector/changed',{option:t[0],selector:s});}};g.subscribe('CustomPrivacyOptionController/update',function(q,r){if(!i.hasClass(r.selector,'audienceSelector'))return;n.setSelected(r.selector,n.getOptionValue(r.option));l.swapIcon(r.selector);var s=i.hasClass(r.selector,'composerAudienceSelector'),t=i.hasClass(r.selector,'inlineAudienceWidget');if(s||t)n.setButtonLabel(r.selector,r.label);n.setButtonTooltip(r.selector,r.tooltip);g.inform('AudienceSelector/update',r);});g.subscribe(['AudienceSelector/changed','AudienceSelector/update'],function(event,q){var r=n.getOptionValue(q.option),s={};if(r==m.BaseValue.CUSTOM){if(event=='AudienceSelector/changed')return;s=j.getData(q.option.id);}else if(i.hasClass(q.selector,'inlineAudienceWidget'))n.setButtonLabel(q.selector,q.option.innerText);for(var t in o){var u=o[t];if(u[q.selector.id]){g.inform('AudienceSelector/syncNonSelectorIcon',{category:t});for(var v in u){var w=u[v];if(!w||q.selector===w)continue;if(n.getValue(w)!==r){n.setSelected(w,r);l.swapIcon(w);}if(r==m.BaseValue.CUSTOM){var x=n.getOption(w,m.BaseValue.CUSTOM+'');if(x){j.setPrivacyData(x.id,s,r);n.setButtonTooltip(w,q.tooltip);}}}}}});e.exports=p;});
__d("DialogExpansion",["Animation","DialogPosition","LoadingDialogDimensions","Style"],function(a,b,c,d,e,f,g,h,i,j){var k=i.WIDTH,l=i.HEIGHT,m=400,n=100;function o(p){"use strict";this._dialog=p;this._fixedTopMargin=p.getFixedTopPosition();}o.prototype.enable=function(){"use strict";this._subscription=this._dialog.subscribe('aftershow',this._onAfterShow.bind(this));};o.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null;};o.prototype.setTargetWidth=function(p){"use strict";this._targetWidth=p;};o.prototype._onAfterShow=function(){"use strict";this._outer=this._dialog.getContentRoot();this._inner=this._dialog.getInnerContent();var p=parseInt(this._dialog.getWidth(),10);if(this._targetWidth)p=this._targetWidth;var q=parseInt(j.get(this._inner,'height'),10);if(isNaN(q))return;var r=h.calculateTopMargin(k,l),s;if(this._fixedTopMargin){s=this._fixedTopMargin;}else s=h.calculateTopMargin(p,q);j.apply(this._outer,{width:k+'px',height:l+'px',marginTop:r+'px',overflow:'hidden'});j.set(this._inner,'opacity','0');setTimeout(this._growThenFade.bind(this,p,q,s),100);};o.prototype._growThenFade=function(p,q,r){"use strict";new g(this._outer).to('width',p).to('height',q).to('marginTop',r).duration(m).ease(g.ease.both).ondone(this._fadeIn.bind(this)).go();};o.prototype._fadeIn=function(){"use strict";j.set(this._outer,'overflow','');j.set(this._outer,'height','');new g(this._inner).from('opacity',0).to('opacity',1).duration(n).go();};e.exports=o;});
__d("XPrivacyAudienceAlignmentLoggingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/privacy\/audience_alignment\/log\/",{client_time:{type:"Int"},event:{type:"Enum",required:true},product:{type:"Enum",required:true}});});
__d("AudienceAlignment",["Arbiter","AsyncRequest","AudienceSelector","ComposerXStore","ContextualDialog","CSS","cx","DialogExpansion","DOM","Event","Focus","Keys","ModalMask","PrivacyConst","SelectorDeprecated","Style","XPrivacyAudienceAlignmentLoggingControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=false,y,z;function aa(va,wa){va.setContext(wa);va.show();}function ba(va,wa){var xa=v.get(wa.getContentRoot(),'margin-top');va.setWidth(this.aaa_dialog_width);va.show();v.set(va.getContentRoot(),'margin-top',xa);}var ca='wwwtux',da='exposed',ea='friends_sticky',fa='public_sticky',ga='selector',ha='holdout',ia='dismissal',ja='learn_more',ka='blur';function la(event){var va=new w().setEnum('product',ca).setEnum('event',event).setInt('client_time',Date.now()).getURI(),wa=new h().setURI(va);wa.send();}function ma(va,wa,xa){if(x)return false;if(!o.contains(document.body,va.getRoot()))return false;if(!wa)return false;var ya=null;if(xa){ya=xa.getSelectedBaseValue();}else ya=parseInt(u.getValue(wa),10);return (ya===t.BaseValue.EVERYONE);}function na(){var va=o.scry(document.body,'#pagelet_timeline_recent');if(va.length>=1){var wa=o.scry(va[0],'li.fbTimelineComposerCapsule');if(wa.length>=1)return wa[0];}return null;}function oa(va,wa,xa,ya){var za;if(ya){za=ya.getMenuElement();}else{var ab=o.find(xa,'div.audienceSelector');za=o.scry(ab,'div.wrap');}if(za.length<1)return;var bb=na(),cb;if(ya){ya.subscribeOnce('open',function(){if(bb)l.addClass(bb,"_2wc-");k.setContext(wa,za);wa.setOffsetY(30);wa.show();});}else cb=u.listen(ab,'open',function(){var fb=o.scry(za[0],'div.uiSelectorMenuWrapper');if(fb.length>0){if(bb)l.addClass(bb,"_2wc-");k.setContext(wa,fb[0]);wa.setOffsetX(12);wa.show();}else s.hide();u.unsubscribe(cb);});if(ya){ya.getPopover().subscribeOnce('hide',function(){pa(wa,za,bb,va);});}else var db=u.listen(ab,'close',function(){pa(wa,za[0],bb,va);u.unsubscribe(db);});if(ya){l.addClass(za,"_35mn");var eb=ya.getTriggerButtonElement();l.addClass(eb,"_35mn");}else l.addClass(za[0],"_35mn");setTimeout(function(){s.show();v.set(s.getNode(),'opacity','0.3');v.set(s.getNode(),'background-color','rgb(0,0,0)');if(ya){ya.openSelectorExpanded();}else u.toggle(ab);},20);}function pa(va,wa,xa,ya){s.hide();va.hide();l.removeClass(wa,"_35mn");if(xa)l.removeClass(xa,"_2wc-");q.set(o.find(ya.getRoot(),'textarea.input'));}function qa(va,wa){va.unsubscribe(y);va.hide();q.set(o.find(wa.getRoot(),'textarea.input'));}function ra(va){var wa=ta(va);return wa&&wa.element;}function sa(va){var wa=ta(va);return wa&&wa.instance&&wa.instance.getInstance().getInstance();}function ta(va){return j.get(va,'mainprivacywidget');}var ua={abort:function(){x=true;},startOnComposerFocus:function(va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb){g.subscribe('composer/focus',function(){var lb=ra(kb),mb=sa(kb);if(ma(wa,lb,mb))if(va){la(ha);}else{la(da);setTimeout(function(){xa.show();var nb=fb.parentElement;this.aaa_dialog_width=xa.getWidth()+nb.offsetWidth-490;var ob=new n(xa);ob.setTargetWidth(this.aaa_dialog_width);ob._onAfterShow();q.set(xa.getRoot());},100);}});p.listen(eb,'click',function(){var lb=ra(kb),mb=sa(kb);qa(xa,wa);if(mb){mb.selectOption(t.PostParam.FRIENDS);}else i.setAudience(wa.getRoot(),t.BaseValue.ALL_FRIENDS);aa(ya,lb);la(ea);});p.listen(fb,'click',function(){var lb=ra(kb),mb=sa(kb);qa(xa,wa);if(mb){mb.selectOption(t.PostParam.EVERYONE);}else i.setAudience(wa.getRoot(),t.BaseValue.EVERYONE);aa(za,lb);la(fa);});p.listen(gb,'click',function(){xa.subscribe('hide',function(){var lb=ra(kb),mb=sa(kb);if(ab)oa(wa,ab,lb,mb);});qa(xa,wa);la(ga);});p.listen(hb,'click',function(){var lb=ra(kb);qa(xa,wa);la(ia);if(bb)aa(bb,lb);});y=xa.subscribe('hide',function(){var lb=ra(kb);q.set(o.find(wa.getRoot(),'textarea.input'));la(ia);if(cb)aa(cb,lb);});z=xa.subscribe('blur',function(){la(ka);});p.listen(ib,'click',function(event){ba(db,xa);la(ja);});p.listen(jb,'click',function(event){db.hide();});p.listen(db.getRoot(),'keydown',function(event){if(p.getKeyCode(event)===r.ESC){db.hide();p.kill(event);}});}};e.exports=ua;});
__d("ComposerXMarauderLogger",["MarauderLogger","ComposerXSessionIDs"],function(a,b,c,d,e,f,g,h){var i={},j={registerComposer:function(k,l,m){i[k.id]={targetType:l,entryPointRef:m,enteredSessions:{}};},logEvent:function(k,l,m){var n=i[k],o=h.getSessionID(k);if(!n||!o)return;g.log(l,'composer',m,undefined,undefined,o);},logEntry:function(k,l){var m=i[k],n=h.getSessionID(k);if(!m||!n||m.enteredSessions[n])return;m.enteredSessions[n]=true;j.logEvent(k,'composer_entry',{composer_type:l,target_type:m.targetType,ref:m.entryPointRef});}};e.exports=j;});
__d("XPrivacyRemindersImpressionLoggingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/privacy\/reminders\/log_imp\/",{type:{type:"String",required:true}});});
__d("ComposerXBootloadStatusAttachment",["Arbiter","AsyncRequest","AudienceAlignment","Bootloader","ComposerXAttachment","ComposerXAttachmentButtonBarState","ComposerXController","ComposerXDragDrop","ComposerXMarauderLogger","ComposerXStore","CSS","DOM","DOMQuery","Event","Focus","PagesComposerEntryLogger","Parent","PlaceholderListener","PrivacyConst","PrivacyRemindersLoggingTypes","SelectorDeprecated","URI","copyProperties","csx","cx","getActiveElement","requestAnimationFrame","XPrivacyRemindersDismissControllerURIBuilder","XPrivacyRemindersImpressionLoggingControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){var ja={only_me:{PRIVACY_CONSTANT:[y.BaseValue.SELF],LOG_IMPRESSION:z.ONLY_ME_IMPRESSION,LOG_CONVERSION:z.ONLY_ME_CONVERSION},everyone:{PRIVACY_CONSTANT:[y.BaseValue.EVERYONE],LOG_IMPRESSION:z.EVERYONE_IMPRESSION,LOG_CONVERSION:z.EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},delta_everyone:{PRIVACY_CONSTANT:[y.BaseValue.EVERYONE],LOG_IMPRESSION:z.DELTA_EVERYONE_IMPRESSION,LOG_CONVERSION:z.DELTA_EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone_tests:{PRIVACY_CONSTANT:[y.BaseValue.EVERYONE],LOG_IMPRESSION:z.EVERYONE_TESTS_IMPRESSION,LOG_CONVERSION:z.EVERYONE_TESTS_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},public_posting_filter_nux:{PRIVACY_CONSTANT:[y.BaseValue.EVERYONE],LOG_IMPRESSION:z.PUBLIC_POSTING_FILTER_NUX_IMPRESSION,LOG_CONVERSION:z.PUBLIC_POSTING_FILTER_NUX_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true}},ka={};for(var la in k)if(k.hasOwnProperty(la))na[la]=k[la];var ma=k===null?null:k.prototype;na.prototype=Object.create(ma);na.prototype.constructor=na;na.__superConstructor__=k;function na(oa,pa){"use strict";k.call(this);this._root=oa;this._config=pa;this._privacyReminders={};this._onSelectorChange=this._onSelectorChange.bind(this);}na.prototype.getRoot=function(){"use strict";return this._root;};na.prototype.initWithComponents=function(oa){"use strict";ka[this._composerID]=this;this._attachmentIsActive=true;var pa=s.find(this.getComponent('maininput').element,'textarea.input'),qa=s.find(w.byClass(this.getRoot(),"_119"),'li.'+this.attachmentClassName);this._focusListener=t.listen(pa,'focus',this._onFocus.bind(this));if(oa&&this._config.targetIsPage){this._pagesComposerEntryLogger=new v(this._config.targetID);this._pagesComposerEntryLogger.registerForContentEntryEvents(pa);}if(this._fullVersion){this._fullInitWithComponents();}else if(!this._bootloading)if(s.contains(this._root,fa())){this._onFocus();}else this._clickListener=t.listen(qa,'click',function(){u.set(pa);}.bind(this));this._dragEnterHandler=g.subscribe('dragenter',function(sa,ta){if(ta.element==this._root){i.abort();var ua=ta.event.dataTransfer.items,va;if(ua)va=n.filterImages(ua);if(va&&va.length>0){u.set(pa);}else{var wa=w.byClass(this._root,'focus_target');x.expandInput(wa);this._onFocus();}}}.bind(this));this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(!oa)u.set(pa);if(this._config.plus_version){this._dragdrop=new n(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();}var ra=this.getComponent('mainprivacywidget');this._privacyWidgetElement=ra.element;this._newPrivacyWidgetInstance=ra.instance&&ra.instance.getInstance().getInstance();};na.prototype._fullInitWithComponents=function(oa){"use strict";if(oa&&oa.show_tag_expansion_reminder){j.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","URI","ComposerTagReminder"],this._bootloadModules.bind(this));}else j.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","URI"],this._bootloadModules.bind(this));Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);if(this._setEveryonePrivacyImpression)this._showPrivacyReminder('everyone');if(this._privacyReminders.delta_everyone&&this._privacyReminders.delta_everyone.dialog){var pa=this._privacyReminders.delta_everyone.dialog.getContent();if(pa){var qa=s.scry(pa,'.photoText')[0],ra=s.scry(pa,'.postText')[0];g.subscribe('multi-upload/images-added',function(){qa&&q.show(qa);ra&&q.hide(ra);}.bind(this));g.subscribe('multi-upload/all-images-removed',function(){qa&&q.hide(qa);ra&&q.show(ra);}.bind(this));}}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.subscribe('changed',this._onSelectorChange);}else aa.subscribe('select',this._onSelectorChange);};na.prototype._bootloadModules=function(oa,pa,qa,ra){"use strict";this._tagger.init(this);this._privacyWidgetTags=new oa(this);if(ra){this._tagExpansionReminder=new ra(this._root);this._tagExpansionReminder.listen();}l.trackCityChanges(this);var sa=s.find(this.getComponent('maininput').element,'textarea.input');if(!this._scraper){this._scraper=new pa(sa);this._scraper.subscribe('match',function(ta,ua){var va=this._getScraperEndpoint();va.addQueryData({scrape_url:encodeURIComponent(ua.url)});m.getAttachment(this._root,va.toString());}.bind(this));}this._scraper.enable();this._scraper.check();};na.prototype._showPrivacyReminder=function(oa){"use strict";var pa=this,qa=this._privacyReminders[oa],ra=ja[oa],sa=null;if(this._newPrivacyWidgetInstance){sa=this._newPrivacyWidgetInstance.getSelectedBaseValue();}else sa=parseInt(aa.getValue(this._privacyWidgetElement),10);if(!qa||!qa.dialog||qa.shown){if(sa===y.BaseValue.EVERYONE&&this._setEveryonePrivacyImpression){this._sendSetEveryonePrivacyImpression();this._setEveryonePrivacyImpression=false;}return;}if(ra.PRIVACY_CONSTANT.indexOf(sa)===-1)return;qa.dialog.setContext(this._privacyWidgetElement).show();qa.shown=true;if(ra.LOG_IMPRESSION){var ta=(new ia()).setString('type',ra.LOG_IMPRESSION).getURI();new h(ta).send();}if(ra.LOG_IMPRESSION_TO_DISMISS_ENDPOINT)if(oa==='delta_everyone'||oa==='only_me'){var ua=(new ha()).setString('type',oa).getURI();new h(ua).send();}else new h('/ajax/privacy/reminders/dismiss').setData({type:oa,dismiss_type:'impression'}).send();var va=function(event){var wa=q.hasClass(event.target,'layerConfirm')||s.scry(event.target,'^.layerConfirm').length===1,xa=q.hasClass(event.target,'layerButton')||s.scry(event.target,'^.layerButton').length===1;if(wa&&oa!=='public_posting_filter_nux'){if(oa==='delta_everyone'||oa==='only_me'){var ya=(new ia()).setString('type',z.DELTA_EVERYONE_OK_BUTTON_CLICKED).getURI();new h(ya).send();}return;}if(oa==='delta_everyone'||oa==='only_me'){var za=(new ha()).setString('type',oa).getURI();new h(za).send();}else new h('/ajax/privacy/reminders/dismiss').setData({type:oa,hide:xa}).send();qa.events.forEach(function(bb){bb.remove();});qa.events=[];qa.dialog.hide();if(xa){ga(function(){if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.openSelector();}else aa.toggle(s.scry(pa.getComponent('mainprivacywidget').element,'.uiSelector')[0]);}.bind(this));if(oa==='delta_everyone'){var ab=(new ia()).setString('type',z.DELTA_EVERYONE_CHANGE_BUTTON_CLICKED).getURI();new h(ab).send();}}}.bind(this);if(this._newPrivacyWidgetInstance){qa.conversionListener=this._newPrivacyWidgetInstance.subscribe('changed',function(wa,xa){var ya=this._newPrivacyWidgetInstance.getSelectedBaseValue();this._logPrivacyReminderConversion(qa,ra,ya);}.bind(this));}else qa.conversionListener=aa.subscribe('select',function(wa,xa){if(xa.selector==this._privacyWidgetElement.firstChild){var ya=parseInt(aa.getValue(xa.option),10);this._logPrivacyReminderConversion(qa,ra,ya);}}.bind(this));qa.events=[t.listen(qa.dialog.getContent(),'click',va),t.listen(qa.dialog.getContext(),'click',va)];};na.prototype._logPrivacyReminderConversion=function(oa,pa,qa){"use strict";if(pa.PRIVACY_CONSTANT.indexOf(qa)===-1){if(pa.LOG_CONVERSION){var ra=(new ia()).setString('type',pa.LOG_CONVERSION).getURI();new h(ra).send();}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(oa.conversionListener);}else aa.unsubscribe(oa.conversionListener);oa.conversionListener=null;}};na.prototype._onSelectorChange=function(oa,pa){"use strict";if(!this.getComponent('mainprivacywidget'))return;if(this._newPrivacyWidgetInstance||(pa.selector===this._privacyWidgetElement.firstChild))setTimeout(function(){Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);}.bind(this));};na.prototype.cleanup=function(){"use strict";this._attachmentIsActive=false;if(this._focusListener){this._focusListener.remove();this._focusListener=null;}if(this._clickListener){this._clickListener.remove();this._clickListener=null;}Object.keys(ja).forEach(function(oa){var pa=this._privacyReminders[oa];if(pa&&pa.dialog&&pa.shown){pa.dialog.hide();pa.events.forEach(function(qa){qa.remove();});pa.events=[];if(pa.conversionListener)if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(pa.conversionListener);}else aa.unsubscribe(pa.conversionListener);pa.conversionListener=null;}}.bind(this));if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}if(this._fullVersion){this._tagger.cleanup();this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;this._scraper.disable();}if(this._dragEnterHandler){this._dragEnterHandler.unsubscribe();this._dragEnterHandler=null;}if(this._pagesComposerEntryLogger)this._pagesComposerEntryLogger.unregister();};na.prototype.reset=function(){"use strict";var oa=w.byClass(this._root,"child_was_focused");if(oa)q.removeClass(oa,"child_was_focused");if(this._tagger)this._tagger.reset();if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.informTagsChanged([]);this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);};na.prototype.canSwitchAway=function(){"use strict";return !w.byClass(this._root,'async_saving');};na.prototype.setBootloadedContent=function(oa){"use strict";this._setEveryonePrivacyImpression=!!oa.set_everyone_privacy_impression;Object.keys(ja).forEach(function(qa){var ra=oa[qa+'_privacy_reminder'];if(ra)this._privacyReminders[qa]={dialog:ra};}.bind(this));var pa=oa.placeholders.map(function(qa){return qa.component_name;});p.waitForComponents(this._composerID,pa,function(){var qa=s.find(this._root,"._3-6"),ra=s.find(this._root,"._3-7");r.setContent(qa,oa.markup.tagger_content);r.setContent(ra,oa.markup.tagger_icons);m.addPlaceholders(this._root,this,oa.placeholders);this._tagger=oa.tagger;l.updateMessageBoxBarState(this);this._fullVersion=true;if(this._attachmentIsActive)this._fullInitWithComponents(oa);}.bind(this));};na.prototype._getScraperEndpoint=function(){"use strict";return ba('/ajax/composerx/attachment/link/scraper/');};na.prototype._onFocus=function(){"use strict";o.logEntry(this._composerID,'status');if(this._fullVersion||this._bootloading)return;g.inform('composer/focus');g.inform('composer/render_pab_nux');m.getEndpoint(this._root,'/ajax/composerx/attachment/status/bootload/',true);this._bootloading=true;};na.prototype.allowOGTagPreview=function(){"use strict";return true;};na.prototype._sendSetEveryonePrivacyImpression=function(){"use strict";new h('/ajax/privacy/reminders/set_everyone_privacy_impression').send();};na.setBootloadedContent=function(oa,pa){"use strict";var qa=ka[oa];if(qa)qa.setBootloadedContent.call(qa,pa);};ca(na.prototype,{_attachmentIsActive:false,_bootloading:false,_fullVersion:false,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,attachmentClassName:"_4j"});e.exports=na;});
__d("ComposerXMentionsInputReset",["DOMQuery","Input"],function(a,b,c,d,e,f,g,h){function i(j){var k=g.scry(j.element,'textarea.input')[0];j.instance.reset();h.reset(k);}e.exports=i;});
__d("ComposerXOGTaggerIconReset",["CSS","cx"],function(a,b,c,d,e,f,g,h){function i(j){g.removeClass(j.element,"_4-jh");g.removeClass(j.element,"_509o");}e.exports=i;});
__d("ComposerXTaggerIconReset",["CSS","cx"],function(a,b,c,d,e,f,g,h){function i(j){g.removeClass(j.element,"_1dsa");g.removeClass(j.element,"_1dsb");g.removeClass(j.element,"_509o");}e.exports=i;});
__d("legacy:AudienceSelector",["AudienceSelector"],function(a,b,c,d){b('AudienceSelector');},3);
__d("FriendListPrivacyOptions",["Arbiter","AsyncDialog","AsyncRequest","Dialog","DOMQuery","PageTransitions","Parent","SelectorDeprecated","$","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=false,r=false,s=null,t={},u=function(w){if(!Object.keys(t).length)l.registerHandler(function(){t={};q=false;r=false;});var x=w.getAttribute('data-name');t[x]=w;n.listen(w,'select',function(y){var z=y.option,aa=k.find(z,'a.itemAnchor'),ba=aa.getAttribute('data-flid');if(!ba)return;var ca=aa.getAttribute('data-dynamic');if(ca&&q){v.showSmartListNux(z,ba);}else if(!ca&&r)v.showDumbListNux([ba]);});},v={listen:function(w,x,y){var z=p(w);if(!z)return;var aa=m.byClass(z,'audienceSelector');if(aa){u(aa);q=x;r=y;}},showSmartListNux:function(w,x){w=o(w);new i('/ajax/friends/lists/smart_list_publish_nux.php').setData({option_id:w.id,flid:x}).send();q=false;},setContextualDialog:function(w,x){x=o(x);var y=m.byClass(x,'audienceSelector');if(y){w.setContext(y);w.show();var z=g.subscribe('composer/publish',function(){w.hide();});w.subscribe('hide',function(){z.unsubscribe();});}},showDumbListNux:function(w){h.send(new i('/ajax/friends/lists/dumb_list_publish_nux.php').setData({flids:w}));r=false;},showBothListsNux:function(w,x){s=o(w);v.showDumbListNux(x);},setDialogX:function(w){if(!s)return;w.subscribe('hide',function(){v.showSmartListNux(s);s=null;});},setDialog:function(){if(!s)return;var w=j.getCurrent();if(w)w.setCloseHandler(function(){v.showSmartListNux(s);s=null;});}};e.exports=v;});
__d("MetaComposerEdDialog",["Animation","Arbiter","ARIA","AsyncRequest","copyProperties","DOM","Ease","Parent","SelectorDeprecated","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=null;function r(s){this._dialog=s.dialog;this.config=s;this._init();}r.init=function(s){if(q){q.config.show_audience=s.show_audience;s.dialog.destroy();return;}q=new r(s);};k(r.prototype,{_init:function(){h.subscribe('ComposerXStatusAttachment/ready',function(){if(this.config.show_audience){this._sendEducationRequest({},'/ajax/composer/audience/education',this._handlerCustomDuration.bind(this,6000));this.config.show_audience=false;}}.bind(this));if(this.config.show_sticky)h.subscribe('composer/mutate',function(s,t){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},'/ajax/composer/audience/sticky_education');}.bind(this));if(this.config.show_tags)h.subscribe('SelectedPrivacyOption/changed',function(s,t){this._sendEducationRequest({ids:t.tags,from:'WithTagger',hasEvent:t.hasEvent,type:t.privacy,tag_num:this.config.n_tag_shown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}.bind(this));o.subscribe('open',this._killAnim.bind(this));},_sendEducationRequest:function(s,t,u){if(!this._updateDialogContext())return;this._async&&this._async.abort();this._async=new j(t);this._async.setData(s).setHandler(u).send();},_updateDialogContext:function(){var s=l.scry(document.body,'div.composerAudienceWrapper'),t,u;for(var v=0;v<s.length;v++){t=s[v];u=p.getElementPosition(t);if(t&&u.x>0&&u.y>0){this._dialog.setContext(t);return true;}}return false;},_handler:function(s){this._handlerCustomDuration(1500,s);},_handlerCustomDuration:function(s,t){var u=t.payload;if(!u||!this._updateDialogContext())return;var v=this._dialog.getContent().firstChild;l.setContent(v,u);i.announce(l.getText(v));this._dialog.show();var w=n.byClass(v,'metaComposerUserEd');if(this._anim){this._anim.stop();this._anim=new g(w);}else this._anim=new g(w).from('opacity',0);this._anim.to('opacity',1).ease(m.sineOut).checkpoint().duration(s).checkpoint().to('opacity',0).ease(m.sineOut).checkpoint().ondone(this._killAnim.bind(this)).go();},_killAnim:function(s,t){if(this._anim){this._dialog.hide();this._anim.stop();this._anim=null;}}});e.exports=r;});
__d("legacy:DynamicIconSelector",["DynamicIconSelector"],function(a,b,c,d){a.DynamicIconSelector=b('DynamicIconSelector');},3);
__d("MentionsTypeaheadAreaView",["ContextualTypeaheadView","Parent"],function(a,b,c,d,e,f,g,h){for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){"use strict";if(g!==null)g.apply(this,arguments);}k.prototype.getContext=function(){"use strict";return h.byClass(this.element,'uiMentionsInput');};e.exports=k;});