/*!CK:3681889053!*//*1400798595,178134563*/

if (self.CavalryLogger) { CavalryLogger.start_js(["f9j63"]); }

__d("XAdPreferencesInterestsEditControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/ads\/preferences\/edit_interests\/",{ad_id:{type:"Int",required:true},interest_fbids_to_add:{type:"IntVector"},interest_fbids_to_remove:{type:"IntVector"},cluster_fbids_to_add:{type:"IntVector"},cluster_fbids_to_remove:{type:"IntVector"}});});
__d("XAdPreferencesNUXControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/ads\/preferences\/nux\/",{type:{type:"String",required:true}});});
__d("XAdsPreferencesFeedbackControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/ads\/preferences\/feeedback\/",{ad_id:{type:"Int",required:true},favorite:{type:"Enum",required:true}});});
__d("AdsPrefs",["AsyncRequest","CSS","DOM","Event","tidyEvent","cx","csx","XAdPreferencesInterestsEditControllerURIBuilder","XAdPreferencesNUXControllerURIBuilder","XAdsPreferencesFeedbackControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(t,u){var v=i.scry(t.parentNode,"div._g1j")[0],w=h.hasClass(v,"_2zny")?'interest_fbids_to_add':'interest_fbids_to_remove',x=new n().setInt('ad_id',u).setIntVector(w,[v.getAttribute('data-id')]).getURI(),y=new g(x);y.send();h.toggleClass(v,"_2zny");return v;}function r(t,u){h.toggleClass(t,"hidden_elem");var v=h.hasClass(t,"hidden_elem")?'ad_useful':'ad_neutral',w=new p().setInt('ad_id',u).setEnum('favorite',v).getURI(),x=new g(w);x.send();}var s={initRHCFeedback:function(t,u,v){k(j.listen(u,'click',function(w){r(v,t);w.kill();}));},initSuggestions:function(t,u,v){k(j.listen(u,'click',function(w){q(w.target,t);}));if(v)k(j.listen(v,'click',function(){i.scry(u,'li').forEach(function(w){h.show(w);});h.hide(v);}));},initMatchingInterests:function(t,u,v){k(j.listen(u,'click',function(w){var x=q(w.target,t);if(v&&x&&h.hasClass(x,"_2zny")){v.setContext(x);v.show();v=null;}}));},initAdvertiserCard:function(t){k(j.listen(t,'click',function(u){var v=i.scry(t,"div._4r42")[0],w=i.scry(t,"._4r43")[0],x=i.scry(t,"._4r44")[0];h.toggleClass(w,'hidden_elem');h.toggleClass(x,'hidden_elem');h.toggleClass(v,'hidden_elem');}));},toggleFavorite:function(t){var u=i.find(t.getRoot(),'img');r(u,t.getLabel());},registerNUX:function(){var t=new o().setString('type','dialog_nux_seen_count').getURI();new g(t).send();}};e.exports=s;});
__d("EntstreamStoryDeduper",["AsyncRequest","DOM","csx","CSS","CacheStorage"],function(a,b,c,d,e,f,g,h,i,j,k){function l(o,p){var q={};for(var r=0;r<o.length;r++){var s=o[r],t=s.getAttribute('data-dedupekey');if(q[t]){if(p){j.hide(s);}else h.remove(s);}else q[t]=1;}}function m(o,p){var q={},r=0,s=Date.now()/1000/3600,t=30;for(var u=0;u<t;++u){var v=new k('localstorage','vpv_local_log.'+parseInt(s-u,10)+'h');r+=v.keys().length>0;for(var w in v.keys())q[v.keys()[w]]=1;}var x=0,y=0,z;for(var aa=0;aa<o.length;aa++){var ba=o[aa],ca=ba.getAttribute('data-dedupekey'),da='checkedVPVLocalCache';if(j.hasClass(ba,da)){continue;}else j.addClass(ba,da);++x;if(q[ca]&&j.shown(ba)){z=ca;++y;if(p){j.hide(ba);}else h.remove(ba);}}if(x>0)new g('/ajax/feed/feed_tracking/vpv_local_storage_log').setData({num_vpvs:Object.keys(q).length,num_hours:r,num_seen_stories:y,num_unseen_stories:x,seen_story_key:z}).send();}var n={dedupe:function(o,p){p=p||"._5jmm";var q=h.scry(o,p);q=q.filter(function(r){return r.getAttribute('data-dedupekey');});l(q,false);},dedupeHide:function(o,p,q){p=p||"._5jmm";var r=h.scry(o,p),s=r.filter(function(w){return w.getAttribute('data-dedupekey')&&j.shown(w);});l(s,true);if(q){var t=h.scry(o,".unread_session");for(var u=0;u<t.length;++u){var v=h.scry(t[u],p);v.length&&m(v,true);}}}};e.exports=n;});
__d("EntstreamFeedObject",["Parent","cx"],function(a,b,c,d,e,f,g,h){var i={getRoot:function(j){return g.byClass(j,"_5jmm");}};e.exports=i;});
__d("EntstreamFeedObjectFollowup",["CSS","DOM","EntstreamFeedObject","Event","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={getFollowup:function(o){var p=h.scry(o,"._5lum");if(!p.length)p=h.scry(o.parentNode,"._5lum");return p?p[0]:null;},initCloseButton:function(o){var p=h.find(o,"._5xsl"),q=j.listen(p,'click',function(){q.remove();h.remove(o);});o.listener=q;},stopListenCloseButton:function(o){if(o.listener)o.listener.remove();},addFollowup:function(o,p,q){var r=g.hasClass(o,"_5pat"),s=h.create('div',{className:"_5lum"});if(r){g.addClass(s,"_5pau");}else g.addClass(s,"_1f84");if(q)g.addClass(s,q);if(p){h.appendContent(s,p);this.initCloseButton(s);h.insertBefore(o,s);}else{var t=n.getFollowup(o);if(t)this.removeFollowup(t);h.prependContent(o,s);}return s;},removeFollowup:function(o){var p=n.getFollowup(o);this.stopListenCloseButton(p);h.remove(p);},appendToFollowup:function(o,p){var q=i.getRoot(m(o)),r=n.getFollowup(q);h.appendContent(r,p);},getFollowupMessage:function(o){var p=h.find(o,"._1f86");return p;},replaceFollowupMessage:function(o,p){this.stopListenCloseButton(o);var q=n.getFollowupMessage(o);h.replace(q,p);this.initCloseButton(o);}};e.exports=n;});
__d("EntstreamFeedObjectFollow",["EntstreamFeedObject","EntstreamFeedObjectFollowup","Event","Parent","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={toggleFollow:function(n,o,p){var q=n.getValue()=='follow_post'?p.follow_post:p.unfollow_post,r=g.getRoot(l(o)),s=h.getFollowup(r);if(s){h.replaceFollowupMessage(s,q);}else{s=h.addFollowup(r,q,"_521o")||h.getFollowup(r);i.listen(s,'click',function(event){var t=event.getTarget(),u="_1f89";if(j.byClass(t,u)){m.toggleFollow(n,o,p);n.toggleMenuItem();}});}}};e.exports=m;});
__d("EntstreamFeedObjectHide",["Event","CSS","EntstreamFeedObject","EntstreamFeedObjectFollowup","Focus","TabbableElements","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o={hide:function(p,q){var r=i.getRoot(n(p));j.addFollowup(r,q);h.addClass(r,"_i6m");o.setFocus(r);},registerUnhide:function(p,q){g.listen(p,'click',function(){if(q)q.send();o.unhide(i.getRoot(p));});},setFocus:function(p){var q=l.find(p);if(q&&q[0])k.setWithoutOutline(q[0]);},unhide:function(p){j.removeFollowup(p);h.removeClass(p,"_i6m");o.setFocus(p);}};e.exports=o;});
__d("YouTube",["CSS","DOM","DOMQuery","Event","Keys","LitestandStoryInsertionStatus","SubscriptionsHandler","UserAgent","Focus","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(s,t,u){"use strict";var v=new m();v.addSubscriptions(j.listen(s,'load',this.listening.bind(this)),l.registerBlocker(function(){return this.playerState===r.STATE_PLAYING;}.bind(this)));p(this,{iframe:s,autofocus:t,autoplay:u,playerState:r.STATE_UNSTARTED,muted:false,volume:100,currentTime:0,timer:null,handler:v});if(t)o.set(s);}r.prototype.id=function(){"use strict";return this.iframe.id;};r.prototype.post=function(s){"use strict";s.id=this.id();this.iframe.contentWindow.postMessage(JSON.stringify(s),'*');};r.prototype.listening=function(){"use strict";this.post({event:'listening'});clearTimeout(this.timer);this.timer=setTimeout(this.listening.bind(this),100);};r.prototype.update=function(s){"use strict";if(s.event=='initialDelivery'){clearTimeout(this.timer);if((n.webkit()||n.firefox())&&s.info&&s.info.debugText.match(/flashVersion/)){this.addAccessibleButtons();if(n.firefox())this.iframe.tabIndex=-1;}}if(s.info)['playerState','muted','volume','currentTime'].forEach(function(t){if(s.info.hasOwnProperty(t))this[t]=s.info[t];}.bind(this));};r.prototype.togglePlay=function(){"use strict";this.post({event:'command',func:(this.playerState==r.STATE_PLAYING)?'pauseVideo':'playVideo'});};r.prototype.toggleMute=function(){"use strict";this.post({event:'command',func:this.muted?'unMute':'mute'});};r.prototype.addAccessibleButtons=function(){"use strict";this.addAccessibleButton('Mute',"_505m",this.toggleMute.bind(this));this.addAccessibleButton('Play',"_505n",this.togglePlay.bind(this));};r.prototype.addAccessibleButton=function(s,t,u){"use strict";var v=h.create('button',{'class':t,tabindex:0},s);h.insertAfter(this.iframe,v);this.handler.addSubscriptions(j.listen(v,'click',u),j.listen(v,'mouseover',g.hide.bind(null,v)),j.listen(this.iframe,'mouseout',g.show.bind(null,v)),j.listen(v,'focus',function(){if(!this.autoplay&&this.playerState==r.STATE_UNSTARTED){this.post({event:'command',func:'playVideo'});this.post({event:'command',func:'pauseVideo'});}}.bind(this)),j.listen(v,'keydown',function(w){switch(w.keyCode){case k.UP:case k.DOWN:this.post({event:'command',func:'setVolume',args:[this.volume+((w.keyCode==k.UP)?10:-10)]});w.prevent();break;case k.RIGHT:case k.LEFT:this.post({event:'command',func:'seekTo',args:[this.currentTime+((w.keyCode==k.RIGHT)?10:-10)]});w.prevent();break;}}.bind(this)));return v;};r.prototype.destroy=function(){"use strict";this.handler.release();delete r.instances[this.id()];if(!Object.keys(r.instances).length)r.handler.remove();};r.register=function(s,t,u){"use strict";if(!window.postMessage)return;if(!Object.keys(r.instances).length)r.handler=j.listen(window,'message',function(w){try{var x=JSON.parse(w.data);if(r.instances[x.id])r.instances[x.id].update(x);}catch(w){}});var v=new r(i.find(s,'iframe'),t,u);r.instances[v.id()]=v;};p(r,{STATE_UNSTARTED:-1,STATE_PLAYING:1,instances:{},handler:null});e.exports=r;});
__d("EntstreamHomeFeedObjectHide",["AsyncRequest","CSS","DOM","EntstreamFeedObject","EntstreamFeedObjectHide","Event","TrackingNodes","YouTube","csx","cx","ge","tx","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t={stopVideo:function(u){var v=s(u),w=i.find(v,"^._5jmm"),x=i.scry(w,'iframe');for(var y=0;y<x.length;y++){var z=n.instances[i.getID(x[y])];if(z&&(z.playerState===n.STATE_PLAYING))z.togglePlay();}var aa=i.scry(w,'video');for(var ba=0;ba<aa.length;ba++)if(('paused' in aa[ba])&&!aa[ba].paused)if(typeof aa[ba].pause==='function')aa[ba].pause();},hide:function(u,v,w,x){t.stopVideo(u);var y=j.getRoot(q(u)),z=h.hasClass(y,"_5pat"),aa;if(z&&w=='afrostart'){aa='';}else{var ba=w=='hide'||w=='afrostart'?"This story is now hidden from your News Feed.":"This story has been marked as spam.",ca=w=='hide'||w=='afrostart'?"Unhide":"Undo",da=m.getTrackingInfo(m.types.UNHIDE_LINK),ea=i.create('a',{href:'#','data-ft':da},ca),fa={};if(v)fa.token=v;if(x)fa.hideable_token=x;var ga=new g().setURI('/ajax/entstream/home/story/unhide').setMethod('POST').setData(fa).setRelativeTo(ea);k.registerUnhide(ea,ga);aa=i.create('div',{'class':"_1f86"},[ba,' ',ea]);}k.hide(u,aa);},registerHide:function(u,v,w,x){l.listen(u,'click',function(){t.hide(u.getAttribute('id'),v,w,x);});}};e.exports=t;});
__d("EntstreamHomeFeedObjectOptionsMenu",["AdsPrefs","EntstreamHomeFeedObjectHide","EntstreamFeedObjectFollow"],function(a,b,c,d,e,f,g,h,i){function j(k,l,m,n,o){k.subscribe('itemclick',function(p,q){switch(q.item.getValue()){case 'hide':case 'markspam':case 'afrostart':h.hide(l,m,q.item.getValue(),o);break;case 'follow_post':case 'unfollow_post':i.toggleFollow(q.item,l,n);break;case 'ad_useful':case 'ad_neutral':g.toggleFavorite(q.item);break;}}.bind(this));k.subscribe('show',function(){k.forEachItem(function(p){p.onShow();});});}e.exports=j;});
__d("EntstreamAttachmentRelatedShare",["Arbiter","AsyncRequest","AttachmentRelatedShareConstants","csx","cx","CSS","DOM","Event","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(r){var s=m.scry(r,"^div._6ns");if(s.length===1){return s[0];}else return null;}var q={loadRelatedAttachment:function(r,s,t){var u=null;if(typeof r==="string"){u=o(r);}else u=r;if(!u)return;var v=n.listen(u,'click',function(){v.remove();g.inform(i.ARTICLE_CLICK,{attachment:u,global_share_id:s,is_right_click:false,share_id:t});}),w=n.listen(u,'mousedown',function(event){if(event.which==3||event.button==2){w.remove();g.inform(i.ARTICLE_CLICK,{attachment:u,global_share_id:s,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(r,s){var t=o(r);if(!t)return;var u=n.listen(t,'click',function(){u.remove();g.inform(i.PHOTO_CLICK,{attachment:t,storyid:s});});},loadRelatedLSCVideoAttachment:function(r,s){var t=null;if(typeof r==='string'){t=o(r);}else t=r;if(!t)return;var u="^div._4-u2",v=m.scry(t,u),w=n.listen(t,'click',function(){w.remove();g.inform(i.VIDEO_CLICK,{attachment:t,global_share_id:s});});},loadRelatedLSCInlineVideoAttachment:function(r,s){var t=null;if(typeof r==='string'){t=o(r);}else t=r;if(!t)return;n.listen(t,'click',function(){var u="^div._4-u2",v="_1d8v",w=m.scry(t,u),x=w.length===1?w[0]:null,y=x.parentNode,z=y.previousSibling;while(!z){y=y.parentNode;z=y.previousSibling;}if(!l.hasClass(z,v)){var aa=m.create('div',{className:v}),ba=m.insertBefore(x.parentNode,aa),ca=ba.length>=1?ba[0]:null;}else ca=z;var da=m.getID(ca);new h().setURI('/ajax/flash/expand_inline.php').setData({share_id:s,target_div:da,max_width:470,max_height:264,replace_target_div:true,expand_you_tube_video:true}).setMethod('GET').setReadOnly(true).setRelativeTo(t.parentNode).send();g.inform(i.VIDEO_CLICK,{attachment:t,global_share_id:s,continued_chaining:true});});},closeButton:function(r,s){n.listen(r,'click',function(){m.remove(s);});},loadRelatedVideos:function(r,s,t){var u=o(r);if(!u)return;var v=o(s);if(!v)return;var w={global_share_id:t,attachment_div_id:m.getID(u.parentNode),video_div_id:s},x=p(u);if(x)w.ft=JSON.parse(x.getAttribute('data-ft'));var y=n.listen(v,'click',function(){y.remove();g.inform(i.VIDEO_CLICK,{attachment:u.parentNode,attachment_div_id:m.getID(u.parentNode),video_div_id:s,global_share_id:t});});},removeOldSuggestions:function(r){var s=o(r);if(!s)return;var t=m.scry(s.parentNode,"._5d73");for(var u=1;u<t.length;u++)m.remove(t[u]);setTimeout(function(){l.show(t[0]);},1000);},removeWrapperClass:function(r){l.removeClass(r,"_6ns");}};e.exports=q;});
__d("FutureHomeSideNav",["Arbiter","AsyncRequest","CSS","DOM","FutureSideNav","FutureSideNavItem","FutureSideNavSection","NavigationMessage","UIPagelet","emptyFunction","tx","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){for(var s in k)if(k.hasOwnProperty(s))u[s]=k[s];var t=k===null?null:k.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=k;function u(){"use strict";if(k!==null)k.apply(this,arguments);}u.prototype.init=function(){"use strict";t.init.apply(this,arguments);this.ajaxPipe=true;this.seeAllEndpoint="/ajax/home/generic.php";this.typeSections={favorites:'pinnedNav',profiles:'pinnedNav',company:'companyNav',apps:'appsNav',groups:'groupsNav',pages:'pagesNav',lists:'listsNav',interests:'interestsNav',connect_apps:'connectNav',type_user:'pinnedNav',type_group:'groupsNav',type_company:'companyNav',type_page:'pagesNav',type_friend_list:'listsNav',type_interest_list:'interestsNav',type_non_canvas_app:'appsNav',type_facebook_app:'appsNav',type_canvas_app_game:'appsNav',type_canvas_app_non_game:'appsNav',type_curated_feed:'interestsNav',type_game_tool:'appsNav',type_page_tool:'pagesNav',type_pinnable_page_tool:'pagesNav'};this._arbiterSubscriptions.push(g.subscribe(n.NAVIGATION_FAVORITE_UPDATE,this.updateFavorite.bind(this)),g.subscribe(n.NAVIGATION_FIRST_RESPONSE,this.navigationFirstResponse.bind(this)));};u.prototype._initSection=function(ba){"use strict";var ca=t._initSection.call(this,ba);for(var da in this.typeSections){var ea=this.typeSections[da];if(ca.id==ea){var fa=j.scry(ca.node,'h4.navHeader')[0];if(fa){var ga='\/bookmarks\/('+da+')(\/)?';ca.seeall=this._initItem({node:fa,id:ca.id,endpoint:this.seeAllEndpoint,key:['bookmarks'],path:[{regex:ga}]});}}}return ca;};u.prototype._constructItem=function(ba,ca){"use strict";return new aa(ba,ca);};u.prototype._constructSection=function(ba){"use strict";return new x(ba);};u.prototype.getSection=function(ba){"use strict";return (this.typeSections[ba]&&this.sections[this.typeSections[ba]]);};u.prototype._getItemForKey=function(ba){"use strict";var ca=t._getItemForKey.call(this,"nf");if(ca&&ca.matchKey(ba)){return ca;}else return t._getItemForKey.call(this,ba);};u.prototype._isCurrentPath=function(ba){"use strict";return ((ba.getDomain()===this.uri.getDomain())&&(ba.getPath()==='/'||ba.getPath()==='/home.php'));};u.prototype._handleMenuClick=function(ba,ca,da,ea){"use strict";if(i.hasClass(da,'favorite')){g.inform(n.NAVIGATION_FAVORITE_UPDATE,{key:ca.numericKey,bookmark_node_id:ca.id,favorite:!ba.equals(this.getSection('favorites')),menu_node:ea});}else t._handleMenuClick.call(this,ba,ca,da,ea);};u.prototype._handleMenuItemClick=function(ba,ca,da){"use strict";if(ba==='favorite'){g.inform(n.NAVIGATION_FAVORITE_UPDATE,{key:da.numericKey,bookmark_node_id:da.id,favorite:!ca.equals(this.getSection('favorites'))});}else t._handleMenuItemClick.call(this,ba,ca,da);};u.prototype._handleLinkClick=function(ba,ca,event){"use strict";var da=this._getItemForNode(ca);if(da&&(da.type=='groups'||da.type=='pages'||da.type=='lists'||da.type=='interests'||da.type=='company'||da.type=='type_group'||da.type=='type_company'||da.type=='type_page'||da.type=='type_friend_list'||da.type=='type_interest_list'||da.type=='type_curated_feed'||da.type=='type_game_tool'||da.type=='type_page_tool'||da.type=='type_facebook_app'||da.type=='type_pinnable_page_tool'))da.setCount(0);t._handleLinkClick.call(this,ba,ca,event);};u.prototype.removeItemByKey=function(ba){"use strict";g.inform(n.NAVIGATION_ITEM_REMOVED,ba);t.removeItemByKey.call(this,ba);};u.prototype.toggleItemByKey=function(ba,ca){"use strict";var da=this.getNodeForKey(ba);if(!ca){g.inform(n.NAVIGATION_ITEM_HIDDEN,ba);da&&i.hide(da);}else da&&i.show(da);var ea=this._getItemForKey(ba);this.getSection(ea.type).refresh();};u.prototype.removeItem=function(ba){"use strict";var ca=this.getSection(ba.type);t.removeItem.call(this,ba);ca.refresh();};u.prototype.updateFavorite=function(ba,ca){"use strict";var da;if(ca.bookmark_node_id){da=this.items[ca.bookmark_node_id];}else da=this._findItem(function(ia){return ia.matchKey(ca.key)&&ia.canFavorite();});var ea=this.getSection("favorites"),fa=p,ga=ca.favorite?ea.addEndpoint:ea.removeEndpoint;if(!da&&ca.favorite){fa=function(){o.loadFromEndpoint('PinnedNavigationPagelet','pagelet_pinned_nav');};}else if(!da){fa=function(){o.loadFromEndpoint('BookmarkNavigationPagelet','pagelet_bookmark_nav');};}else{var ha=this.getSection(da.type);if(ca.favorite){i.show(da.node);this.moveItem(ea,da);da.showFavorite(ca.menu_node);}else if(!ha.equals(ea)){this.moveItem(ha,da,true);da.hideFavorite(ca.menu_node);}else this.removeItem(da);ha.refresh();ea.refresh();ca.key=da.numericKey;g.inform('NavigationMessage.FAVORITES_UPDATED');}new h().setURI(ga).setData({id:ca.key}).setHandler(fa).send();};u.prototype._doPageTransition=function(ba,ca){"use strict";var da=t._doPageTransition.call(this,ba,ca);if(da&&(ba.type=='groups'||ba.type=='lists'||ba.type=='interests'||ba.type=='company'||ba.type=='type_group'||ba.type=='type_page'||ba.type=='type_friend_list'||ba.type=='type_interest_list'||ba.type=='type_curated_feed'||ba.type=='type_game_tool'||ba.type=='type_page_tool'||ba.type=='type_facebook_app'||ba.type=='type_pinnable_page_tool')){ba.setCount(0);ba.hideUnreadDot();}return da;};u.prototype.navigationFirstResponse=function(){"use strict";this.setSelected(this.loading);};for(var v in m)if(m.hasOwnProperty(v))x[v]=m[v];var w=m===null?null:m.prototype;x.prototype=Object.create(w);x.prototype.constructor=x;x.__superConstructor__=m;function x(ba){"use strict";m.call(this,ba);this.editEndpoint='/ajax/bookmark/edit/';this.addEndpoint='/ajax/bookmark/add/';this.removeEndpoint='/ajax/bookmark/delete/';}x.prototype.refresh=function(){"use strict";var ba=j.scry(this.node,'li.sideNavItem'),ca=j.scry(this.node,'h4.navHeader'),da=j.scry(this.node,'div.actionLinks'),ea=ba.some(i.shown);ca.length&&i.conditionShow(ca[0],ea);da.length&&i.conditionShow(da[0],ea);};for(var y in l)if(l.hasOwnProperty(y))aa[y]=l[y];var z=l===null?null:l.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=l;function aa(){"use strict";if(l!==null)l.apply(this,arguments);}aa.prototype.canFavorite=function(){"use strict";return !!this._getFavoriteLabel();};aa.prototype.showFavorite=function(ba){"use strict";j.setContent(this._getFavoriteLabel(ba),"Remove from Favorites");};aa.prototype.hideFavorite=function(ba){"use strict";j.setContent(this._getFavoriteLabel(ba),"Add to Favorites");};aa.prototype.hideUnreadDot=function(){"use strict";var ba=j.scry(this.node,'img.unreadDot')[0];ba&&i.hide(ba);};aa.prototype._getFavoriteLabel=function(ba){"use strict";return j.scry(ba,"li.favorite span._54nh")[0];};e.exports=u;});
__d("legacy:home-side-nav-future-js",["FutureHomeSideNav"],function(a,b,c,d){a.FutureHomeSideNav=b('FutureHomeSideNav');},3);
__d("KeyboardShortcuts",["KeyEventController","Layer","ModalLayer"],function(a,b,c,d,e,f,g,h,i){function j(l,m,n){"use strict";this.key=l;this.handler=m;this.filter=n;this.register();}j.prototype.register=function(){"use strict";this.token=g.registerKey(this.key,this.handler,this.filter);};j.prototype.remove=function(){"use strict";this.token.remove();};var k={_tokens:[[]],register:function(l,m,n){n=n||{};var o=n.allowDefault?m:function(event,s){m.apply(this,arguments);event.prevent();},p=n.baseFilters||[g.defaultFilter],q=function(event,s){for(var t=0,u=p.length;t<u;t++)if(!p[t](event,s))return false;return !n.filter||n.filter(event,s);},r=new j(l,o,q);this._tokens[this._tokens.length-1].push(r);return r;},init:function(){h.subscribe('show',function(l,m){if(m.hasBehavior(i))this.pushLayer();}.bind(this));h.subscribe('hide',function(l,m){if(m.hasBehavior(i))this.popLayer();}.bind(this));},pushLayer:function(){var l=this._tokens[this._tokens.length-1];l&&l.forEach(function(m){m.remove();});this._tokens.push([]);},popLayer:function(){var l=this._tokens.length-1;if(l<0)return;var m=this._tokens[l];m.forEach(function(o){o.remove();});this._tokens.pop();var n=this._tokens[l-1];n&&n.forEach(function(o){o.register();});}};k.init();e.exports=k;});
__d("FeedBaseKeyboardController",["$","AccessibilityLogger","Arbiter","AsyncDialog","AsyncRequest","Banzai","BanzaiODS","BanzaiNectar","CSS","DOM","DOMScroll","DOMQuery","Event","Focus","KeyboardShortcuts","LikeConfirmer","NavigationMessage","Parent","Run","SubscriptionsHandler","Vector","ViewportBounds","emptyFunction","ge","getActiveElement","isAsyncScrollQuery","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){var ha;function ia(){ha=o.hasClass(document.documentElement,'tinyViewport')?0:g('pagelet_bluebar').offsetTop+g('pagelet_bluebar').offsetHeight;}setTimeout(ia,0);s.listen(window,'resize',ga(ia));function ja(ka){"use strict";this.root=ka;this.init();}ja.prototype.getStories=function(){"use strict";};ja.prototype.getParentStory=function(ka){"use strict";};ja.prototype.isStory=function(ka){"use strict";};ja.prototype.isHoldoutStory=function(ka){"use strict";};ja.prototype.getHeadline=function(ka){"use strict";};ja.prototype.getPreviousStory=function(ka){"use strict";};ja.prototype.getNextStory=function(ka){"use strict";};ja.prototype.setSelected=function(ka,la){"use strict";};ja.prototype.clickLike=function(){"use strict";};ja.prototype.clickComment=function(){"use strict";};ja.prototype.clickShare=function(){"use strict";};ja.prototype.clickSeeMore=function(){"use strict";};ja.prototype.openAttachment=function(){"use strict";};ja.prototype.focusComposer=function(){"use strict";var ka=p.scry(da('pagelet_composer'),'textarea')[0];if(ka){t.set(ka);q.scrollToTop(true);}};ja.prototype.getScrollOffset=function(){"use strict";return 10;};ja.prototype.getAnimationLength=function(ka){"use strict";return Math.min(Math.abs(aa.getElementPosition(ka).y-ba.getTop()-document.body.scrollTop),400);};ja.prototype.findTop=function(){"use strict";var ka=this.getStories();for(var la=0;la<ka.length;la++)if(aa.getElementPosition(ka[la]).y>aa.getScrollPosition().y)return ka[la];};ja.prototype.onLeave=function(){"use strict";this.subscriptions&&this.subscriptions.release();};ja.prototype.getHelpDialogRequest=function(){"use strict";if(!this.dialogRequest){this.dialogRequest=new k('/ajax/keyboard_shortcuts');this.dialogRequest.setReadOnly(true);}else if(this.dialogRequest.transport)return null;return this.dialogRequest;};ja.prototype.init=function(){"use strict";y.onLeave(this.onLeave.bind(this));this.subscriptions=new z();this.subscriptions.addSubscriptions(i.subscribe(w.NAVIGATION_BEGIN,this.onLeave.bind(this)),u.register('j',this.vert.bind(this,1)),u.register('k',this.vert.bind(this,-1)),u.register('l',function(){var ka=this.getParentStory(ea());v.like(function(){this.setSelected(ka,false);this.clickLike();}.bind(this),ea());}.bind(this),{filter:this.hasActiveStory.bind(this)}),u.register('c',this.clickComment.bind(this),{filter:this.hasActiveStory.bind(this)}),u.register('o',this.openAttachment.bind(this),{filter:this.hasActiveStory.bind(this)}),u.register('p',this.focusComposer.bind(this)),u.register('s',this.clickShare.bind(this),{filter:this.hasActiveStory.bind(this)}),u.register('SLASH',function(){var ka=this.getHelpDialogRequest();ka&&j.send(ka);}.bind(this),{filter:function(event,ka){return event.getModifiers().shift;}}),u.register('RETURN',this.clickSeeMore.bind(this),{filter:this.hasExpandableStoryInFocus.bind(this)}),s.listen(document,'focusin',function(event){var ka=event.getTarget(),la=(ka.nodeName=='OBJECT'||ka.nodeName=='EMBED'||ka.nodeName=='IFRAME'),ma=this.getParentStory(ka);if(ma&&(this.selected!=ma)&&!la){this.setSelected(ma,false);if(!this.isInteractive(ka))this.setFocused(ma);}}.bind(this)));};ja.prototype.hasActiveStory=function(event,ka){"use strict";var la=ea();return !(la&&o.shown(la))||!!this.getParentStory(la);};ja.prototype.hasExpandableStoryInFocus=function(event,ka){"use strict";var la=ea();return (la.getElementsByClassName('text_exposed_root').length&&!la.getElementsByClassName('text_exposed_root text_exposed').length);};ja.prototype.click=function(ka){"use strict";if(!this.selected)return;var la;for(var ma=0,na=arguments.length;ma<na;ma++){la=p.scry(this.selected,arguments[ma])[0];if(la&&o.shown(la)){la.click();return;}}};ja.prototype.vert=function(ka){"use strict";if(!this.scrollInitialized){this.subscriptions.addSubscriptions(s.listen(document,'scroll',function(){if(this.selected&&!this.scrolling)this.setSelected(null,false);}.bind(this)));this.scrollInitialized=true;}var la,ma;if(this.selected){if(l.isEnabled('kbshortcuts_feed')){ma=ka>0?'kbshortcuts.scroll_down':'kbshortcuts.scroll_up';m.bumpEntityKey('kbshortcuts_feed',ma);n.log('feed_scroll',ma,{});}h.logJKKey();if(this.selected.id=='pagelet_composer'){la=ka>0?this.getStories()[0]:null;if(this.isHoldoutStory(la))la=this.getPreviousStory(la);}else la=ka>0?this.getNextStory(this.selected):(this.getPreviousStory(this.selected)||da('pagelet_composer'));if(!la){return;}else if(!r.isElementNode(la)){o.removeClass(this.selected,'selectedStorySimple');this.selected=la;return this.vert(ka);}}if(!la||x.byClass(la,'hidden_elem')||!p.contains(document,la)){la=this.findTop();if(la&&ka<0)la=this.getPreviousStory(la);if(this.isHoldoutStory(la))la=this.getPreviousStory(la);}if(!la)return;this.anim&&this.anim.stop();var na=(Date.now()-(this.lastScroll||0)>30),oa=this.setFocused.bind(this,la);if(fa()){na=false;oa();oa=ca;}this.scrolling=true;this.scrollingTimer&&window.clearTimeout(this.scrollingTimer);this.anim=q.scrollTo(la,na?this.getAnimationLength(la):0,false,aa.getViewportDimensions().y-ha-this.getScrollOffset(),0,function(){this.scrollingTimer=window.setTimeout(function(){this.scrolling=false;}.bind(this),300);var pa=aa.getScrollPosition();oa();if(pa.distanceTo(aa.getScrollPosition())!==0)q.scrollTo(pa,0);}.bind(this));this.setSelected(la,true);this.lastScroll=Date.now();};ja.prototype.isInteractive=function(ka){"use strict";return ((ka.nodeName=='INPUT')||(ka.nodeName=='BUTTON')||(ka.nodeName=='TEXTAREA')||(ka.nodeName=='A')||!!x.byAttribute(ka,'contenteditable'));};ja.prototype.setTabindexOnHeadline=function(ka,la){"use strict";if(this.isStory(ka)){var ma=this.getHeadline(ka);if(ma)ma.tabIndex=la;}};ja.prototype.setTabindexOnStory=function(ka,la){"use strict";if(this.isStory(ka))ka.tabIndex=la;};ja.prototype.setFocused=function(ka){"use strict";if(this.isStory(ka))t.setWithoutOutline(ka);};e.exports=ja;});
__d("PageAdsAttachmentLinkShareConstants",[],function(a,b,c,d,e,f){var g={LINK_ATTACHMENT_CLICK:'link_attachment_click'};e.exports=g;});
__d("ViewportTracking",["Arbiter","Banzai","CSS","cx","DOMDimensions","Event","NavigationMessage","Run","Style","SubscriptionsHandler","UserActivity","Vector","clickRefAction","collectDataAttributes","copyProperties","debounce","getElementPosition","throttle","CacheStorage"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=97,aa='vpv';function ba(){"use strict";}ba.prototype.init=function(ca){"use strict";this.useBanzai=!!ca.banzai;this.conservative_initial_logging=!!ca.conservative_initial_logging;this.banzaiNoDelay=!!ca.banzai_no_delay;this.useLocalStorage=!!ca.use_local_storage;this.readStoryIDs={};this.minSizeToBeVisible=200;this.minFractionToBeVisibleForTimetracking=.5;this.minFractionForAdditionalView=0;this.timetrackingThrottlingInterval=100;this.minTimeToReportImmediately=500;this.cachedAllStories=null;this.cachedViewportHeight=k.getViewportDimensions().height;this.isTimetrackingEnabled=0;this.storyEnteredVPTimestamp={};this.alreadyLoggedDurationStories=[];this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;this.getDataFromConfig(ca);this.isLoose=!!ca.is_loose;this.maxScrollPosition=0;this.porportionRatio=.5;this.is_proportion=!!ca.is_proportion;if(this.is_proportion)this.proportionRatio=ca.proportion_ratio;if(ca.tracking_duration_config){this.timetrackingThrottlingInterval=ca.tracking_duration_config.timetracking_throttling_interval;this.userActivityPollingInterval=ca.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=ca.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=ca.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=ca.tracking_duration_config.min_time_to_report_immediately;this.minFractionForAdditionalView=ca.tracking_duration_config.min_fraction_for_additional_view;this.localStorageLogMinDurationMs=ca.tracking_duration_config.local_storage_log_min_duration_ms;}var da,ea=v(this.fireTimer,this.getTimeout(),this);if(this.isLoose){this.minSizeToBeVisible=0;da=x(function(){this.maxScrollPosition=Math.max(this.maxScrollPosition,r.getScrollPosition().y);ea();}.bind(this));}else da=ea;if(!ca.scroll_only&&!ca.conservative_initial_logging){this.fireTimer();}else if(ca.conservative_initial_logging){this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;}var fa=x(this.updateTimeTrackingData.bind(this,false),this.timetrackingThrottlingInterval);this.subscriptions=new p();this.subscriptions.addSubscriptions(this._getScrollListener(da),l.listen(window,'resize',function(){this.cachedViewportHeight=k.getViewportDimensions().height;da();}.bind(this)),g.subscribe(m.NAVIGATION_BEGIN,this.cleanup.bind(this)),g.subscribe('Stream/totalHeadLoadedStories',function(ga,ha){this._headLoadStoryCount=ha;}.bind(this)));if(this.isTimetrackingEnabled){this.updateTimeTrackingData(false);this.subscriptions.addSubscriptions(this._getScrollListener(fa));this._userActivityPoller();}n.onLeave(this.cleanup.bind(this));};ba.prototype._getScrollListener=function(ca){"use strict";return l.listen(window,'scroll',ca);};ba.prototype.cleanup=function(){"use strict";if(this.subscriptions){this.subscriptions.release();this.subscriptions=null;}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true);}this.initialStories=[];this._headLoadStoryCount=0;};ba.prototype.fireTimer=function(){"use strict";if(this.conservative_initial_logging&&!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true;}this.getStoriesInView().forEach(this.markStoryRead,this);};ba.prototype._userActivityPoller=function(){"use strict";if(!this.userInactiveLock&&!q.isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.updateTimeTrackingData(true);q.subscribeOnce(function(){this.updateTimeTrackingData(false);this.userInactiveLock=false;}.bind(this));}this.userActivityPollerTimeoutID=setTimeout(this._userActivityPoller.bind(this),this.userActivityPollingInterval);};ba.prototype.addVisibleStoriesTimestamps=function(ca,da){"use strict";var ea={};for(var fa=0,ga=ca.length;fa<ga;fa++){var ha=this.getStoryID(ca[fa]);ea[ha]=true;if(ha in this.storyEnteredVPTimestamp)continue;this.storyEnteredVPTimestamp[ha]={ts:da,story:ca[fa]};}return ea;};ba.prototype.removeTimestampsOfStoriesNotInView=function(ca,da){"use strict";for(var ea in this.storyEnteredVPTimestamp)if(!(ea in ca)){this.recordTimeStoryWasInView(this.storyEnteredVPTimestamp[ea].story,this.storyEnteredVPTimestamp[ea].ts,da);delete this.storyEnteredVPTimestamp[ea];}};ba.prototype.updateTimeTrackingData=function(ca){"use strict";if(!this.storyEnteredVPTimestamp)this.storyEnteredVPTimestamp={};var da=Date.now(),ea={},fa;if(!ca)ea=this.getAllStoriesInView();fa=this.addVisibleStoriesTimestamps(ea,da);this.removeTimestampsOfStoriesNotInView(fa,da);};ba.prototype.getStoriesInView=function(){"use strict";var ca=this.getAllStories(),da=[],ea=false;for(var fa=0;fa<ca.length;fa++){var ga=ca[fa],ha=this.getStoryID(ga);if(this.hasBeenVisible(ha))continue;if(this.isVisible(ga)){if(ga.getAttribute('data-insertion-position')===null)ga.setAttribute('data-insertion-position',fa-this._headLoadStoryCount);da.push(ga);ea=true;}else if(ea)break;}return da;};ba.prototype.getAllStoriesFromCache=function(){"use strict";if(this.cachedAllStories===null)this.cachedAllStories=this.getAllStories();return this.cachedAllStories;};ba.prototype.invalidateAllStoriesCache=function(){"use strict";this.cachedAllStories=null;};ba.prototype.getAllStoriesInView=function(){"use strict";var ca=this.getAllStoriesFromCache(),da=[],ea=false,fa=0,ga=ca.length,ha=1;if(this._indexOfLastVisibleStoryOnPreviousPass>ga/2){fa=ga-1;ga=-1;ha=-ha;}for(var ia=fa;ia!=ga;ia+=ha){var ja=ca[ia];if(this.isVisible(ja,false,this.minFractionToBeVisibleForTimetracking*k.getElementDimensions(ja).height)){if(ja.getAttribute('data-insertion-position')===null)ja.setAttribute('data-insertion-position',ia-this._headLoadStoryCount);da.push(ja);ea=true;}else if(ea){this._indexOfLastVisibleStoryOnPreviousPass=ia-ha;break;}}for(ia=this.alreadyLoggedDurationStories.length-1;ia>=0;ia--){ja=this.alreadyLoggedDurationStories[ia];if(!this.isVisible(ja,false,this.minFractionForAdditionalView*k.getElementDimensions(ja).height))this.alreadyLoggedDurationStories.splice(ia,1);}return da;};ba.prototype.getTimetrackingDataToLog=function(ca,da,ea){"use strict";var fa={evt:z,vpvd_start_timestamp:da,vpvd_time_delta:ea-da,story_height:k.getElementDimensions(ca).height,viewport_height:this.cachedViewportHeight};return {ft:fa};};ba.prototype.markStoryReadInLocalStorage=function(ca){"use strict";if(this.useLocalStorage){var da='vpv_local_log.'+parseInt(Date.now()/1000/3600,10)+'h',ea=new y('localstorage',da);ea.set(ca,1);}};ba.prototype.recordTimeStoryWasInView=function(ca,da,ea){"use strict";if(this.isTimetrackingEnabled){if(this.alreadyLoggedDurationStories.indexOf(ca)>-1){return;}else this.alreadyLoggedDurationStories.push(ca);var fa=this.getTimetrackingDataToLog(ca,da,ea),ga=t(ca,['ft']);u(fa.ft,ga.ft);var ha=!!ga.ft.ei&&(fa.ft.vpvd_time_delta>this.minTimeToReportImmediately);delete fa.ei;this.sendDataToLog(ca,fa,ha);if(this.useLocalStorage&&fa.ft.vpvd_time_delta>this.localStorageLogMinDurationMs){var ia=this.getStoryID(ca);this.markStoryReadInLocalStorage(ia);}}};ba.prototype.hasBeenVisible=function(ca){"use strict";return ca in this.readStoryIDs;};ba.prototype.isVisible=function(ca,da,ea){"use strict";if(typeof da==="undefined")da=this.isLoose;if(typeof ea==="undefined")ea=this.minSizeToBeVisible;var fa=r.getScrollPosition().y,ga=k.getViewportDimensions().height,ha=w(ca),ia=k.getElementDimensions(ca),ja=ga+this.maxScrollPosition-fa;if(!ha.x&&!ha.y&&!ia.x&&!ia.y)return false;if(da&&ha.y<ja)return true;var ka=Math.max(ha.y,0),la=Math.min(ha.y+ia.height,ga),ma;if(this.is_proportion){ma=ia.height*this.proportionRatio;}else ma=Math.min(ia.height,ea);return (la-ka)>=ma;};ba.prototype.sendDataToLog=function(ca,da,ea){"use strict";if(this.useBanzai){var fa={};if(ea){fa.delay=3000;fa.retry=true;}h.post('feed_tracking',da,fa);}else s(aa,ca,null,'FORCE',da);};ba.prototype.markStoryRead=function(ca){"use strict";var da=this.getStoryID(ca);if(!da||this.hasBeenVisible(da))return;this.readStoryIDs[da]=true;var ea=this.getDataToLog(ca),fa=t(ca,['ft']);u(ea.ft,fa.ft);delete ea.ei;this.markStoryReadInLocalStorage(da);this.sendDataToLog(ca,ea,this.banzaiNoDelay);if(i.hasClass(ca,"_50mx")){i.addClass(ca,"_50nb");i.removeClass(ca,"_50mx");}};e.exports=ba;});
__d("GroupViewportTracking",["DOM","csx","ViewportTracking","Banzai","$"],function(a,b,c,d,e,f,g,h,i,j,k){for(var l in i)if(i.hasOwnProperty(l))n[l]=i[l];var m=i===null?null:i.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=i;function n(){"use strict";if(i!==null)i.apply(this,arguments);}n.prototype.getDataFromConfig=function(o){"use strict";this.timeout=o.record_delay;};n.prototype.getTimeout=function(){"use strict";return this.timeout;};n.prototype.getAllStories=function(){"use strict";return g.scry(k('pagelet_group_mall'),"._5pat");};n.prototype.getStoryID=function(o){"use strict";var p=JSON.parse(o.getAttribute('data-ft'));return p.id;};n.prototype.getDataToLog=function(o){"use strict";return JSON.parse(o.getAttribute('data-ft'));};n.prototype.sendDataToLog=function(o,p){"use strict";if(this.useBanzai)j.post('group_feed_tracking',p);};e.exports.init=function(o){n.instance=new n();n.instance.init(o);};e.exports.getInstance=function(){return n.instance;};});
__d("LitestandViewportHeight",["Arbiter","CSS","Event","cx","debounce","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n={SMALL:'small',NORMAL:'normal',LARGE:'large',getSize:function(){if(m==="_4vcw")return n.SMALL;if(m==="_4vcx")return n.LARGE;return n.NORMAL;},init:function(o){n.init=l;var p=k(function(){var q=document.documentElement,r=q.clientHeight,s;if(r<=o.max_small_height){s="_4vcw";}else if(r>=o.min_large_height)s="_4vcx";if(s!==m){m&&h.removeClass(q,m);m=s;m&&h.addClass(q,m);g.inform('ViewportSizeChange');}});p();i.listen(window,'resize',p);}};e.exports=n;});
__d("runAfterScrollingStops",["Arbiter","Event","Run","debounceAcrossTransitions","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){function l(w,x,y){if(x&&o[x])return;if(!n){g.subscribe('page_transition',v);n=true;}if(!m){w();return;}x&&(o[x]=1);p.push(w);if(!y){if(r){i.onLeave(v);r=false;}q.push(p.length-1);}}var m,n,o={},p=[],q=[],r=true,s=500,t=j(function(){m=false;var w=p;p=[];q=[];o={};for(var x=0,y=w.length;x<y;++x)w[x]();},s);function u(){m=true;t();}function v(){var w=q;q=[];r=true;for(var x=0,y=w.length;x<y;++x)p[w[x]]=k;}h.listen(window,'scroll',u);e.exports=l;});
__d("LitestandOffscreenController",["Arbiter","CSS","DOM","Event","LitestandMessages","LitestandViewportHeight","NavigationMessage","Parent","Run","Style","SubscriptionsHandler","Vector","cx","csx","queryThenMutateDOM","runAfterScrollingStops","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=1,y=9,z=7,aa=10,ba={},ca=false,da,ea,fa,ga,ha=[];function ia(){da&&da.release();da=null;ca=false;}function ja(){ba={};ha=[];}function ka(){for(var wa in ba){var xa=ba[wa];if(xa.hidden)xa.dirty=true;}}function la(){if(h.hasClass(document.body,"body._5vb_")){return aa;}else if(l.getSize()===l.SMALL)return z;return y;}function ma(){ga=ga||r.getViewportDimensions().y;ea=r.getScrollPosition().y;fa=ea+ga;if(x){ea-=ga*x;fa+=ga*x;}for(var wa in ba){var xa=ba[wa];xa.position=r.getElementPosition(xa.element).y;if(!xa.hidden)xa.height=xa.element.offsetHeight;}}function na(){var wa=[];for(var xa in ba){var ya=ba[xa],za=ya.position,ab=za+ya.height<ea,bb=za>fa;if(!ya.hidden&&(ab||bb)){oa(ya);}else if(!ab&&!bb){ya.pendingHide=false;if(ya.hidden){if(ya.dirty&&za<ea){wa.push(xa);h.addClass(pa(ya),"_49nu");}else p.apply(ya.element,{height:'',marginBottom:''});h.show(pa(ya));ya.dirty=false;ya.hidden=false;}}}if(!wa.length)return;var cb=0;u(function(){for(var db=0,eb=wa.length;db<eb;db++){var fb=ba[wa[db]];cb+=fb.height-pa(fb).offsetHeight+p.getFloat(fb.element,'marginBottom');}},function(){for(var db=0,eb=wa.length;db<eb;db++){var fb=ba[wa[db]];h.removeClass(pa(fb),"_49nu");p.apply(fb.element,{height:'',marginBottom:''});}cb&&(document.body.scrollTop-=cb);});}function oa(wa){if(!wa.pendingHide){ha.push(wa);wa.pendingHide=true;}}function pa(wa){if(wa.wrapperElement)return wa.wrapperElement;var xa=wa.element;if(xa.firstElementChild)return (wa.wrapperElement=xa.firstElementChild);for(var ya=0;ya<xa.childNodes.length;ya++)if(xa.childNodes[ya].tagName)return (wa.wrapperElement=xa.childNodes[ya]);}function qa(){var wa=la()+'px';for(var xa=0;xa<ha.length;xa++){var ya=ha[xa];if(ya&&ya.element&&ya.pendingHide&&!ya.hidden){p.apply(ya.element,{height:ya.height+'px',marginBottom:wa});h.hide(pa(ya));ya.hidden=true;ya.pendingHide=false;}}ha=[];}function ra(){v(qa,'LitestandOffscreenController/hide');u(ma,na,'LitestandOffscreenController');}function sa(){for(var wa in ba){var xa=ba[wa];if(!pa(xa).childNodes.length){i.remove(xa.element);delete ba[wa];}}}function ta(wa,xa){var ya=n.byClass(xa.story,"_4ikz");if(!ya)return;ya=ba[i.getID(ya)];if(ya&&ya.hidden)ya.dirty=true;}function ua(){o.onLeave(ia);da=new q();da.addSubscriptions(g.subscribe(k.FILTER_SWITCH_BEGIN,ja),g.subscribe(m.NAVIGATION_BEGIN,ja),g.subscribe(k.STORIES_REMOVED,sa),g.subscribe('Entstream/StoryUpdated',ta),g.subscribe('ViewportSizeChange',ka),j.listen(window,'scroll',w(ra)),j.listen(window,'resize',w(function(){ga=null;ra();})));ca=true;}var va={attachSubstream:function(wa){ca||ua();ba[i.getID(wa)]={element:wa};}};e.exports=va;});
__d("LitestandComposerBase",["Animation","Arbiter","ComposerXController","DOM","LitestandMessages","Run","SubscriptionsHandler","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=600;function p(q){this._composerID=q;this._subscriptions=new m();this.init();}n(p.prototype,{init:function(){this._subscriptions.addSubscriptions(h.subscribe('LitestandComposer/publish',function(q,r){if(r.composer_id===this._composerID)this.liveInsertComposerStory(this._composerID,r.markup);}.bind(this)),h.subscribe(k.FILTER_SWITCH_BEGIN,this._cleanup.bind(this)));l.onLeave(this._cleanup.bind(this));},_cleanup:function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=null;},liveInsertComposerStory:function(q,r){q&&i.reset(q);if(!r)return;j.prependContent(this.getStreamRoot(),r);new g(r).from('opacity',0).to('opacity',1).duration(o).go();},getStreamRoot:function(){}});e.exports=p;});
__d("LitestandComposer",["Arbiter","LitestandComposerBase","LitestandStream"],function(a,b,c,d,e,f,g,h,i){for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(){"use strict";if(h!==null)h.apply(this,arguments);}l.prototype.init=function(){"use strict";k.init.call(this);this._subscriptions.addSubscriptions(g.subscribe('LitestandComposer/globalPublish',function(m,n){if(n.top_news_id===i.getSectionID())this.liveInsertComposerStory(null,n.markup);}.bind(this)));};l.prototype.getStreamRoot=function(){"use strict";return i.getStreamRoot();};l.initComposer=function(m){"use strict";new l(m);};e.exports=l;});
__d("LitestandStreamLoader",["Arbiter","CSS","csx","cx","DOM","DOMScroll","Event","FbFeedHighlight","JSXDOM","LitestandMessages","LitestandOffscreenController","LitestandStream","NavigationMessage","OnVisible","Run","throttle","UIPagelet","UserActivity","EntstreamStoryDeduper","$","copyProperties","ge","getUnboundedScrollPosition"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){var da=false,ea=false,fa={},ga,ha,ia,ja,ka,la,ma=0,na,oa,pa=[],qa=false,ra=false,sa,ta,ua=false,va=true,wa,xa=0,ya,za;function ab(){u.onLeave(bb);pa=[g.subscribe(s.NAVIGATION_BEGIN,bb),g.subscribe(p.FILTER_SWITCH_BEGIN,bb),g.subscribe(p.NEWER_STORIES_INSERTED,function(){za=null;}),g.subscribe(p.TOUR_BEGIN,function(){da=true;}),g.subscribe(p.TOUR_END,function(){da=false;eb();}),g.subscribe(p.STORIES_REMOVED,cb),g.subscribe(p.UPDATE_STREAM,jb),g.subscribe(p.REFRESH_STREAM,jb),g.subscribeOnce(p.UNREAD_ONLY_BEGIN,function(){qa=true;var sb=ha.parentNode,tb=k.scry(sa,".preloadUnseenStory"),ub=k.scry(sa,".unseenStoriesHeader")[0];if(ub&&tb[0]&&sb){k.insertBefore(sb,sa);h.show(sa);tb.forEach(function(vb){h.show(vb);n.highlight(vb);});y.dedupeHide(r.getStreamRoot(),r.getStoriesSelector(),ua);l.scrollTo(ub,800,false,false,10);cb();}})];ea=true;}function bb(){g.inform(p.LEAVE_HOME);fa={};oa=null;ma=0;pa.forEach(g.unsubscribe);pa=[];ga&&ga.remove();ka&&clearTimeout(ka);ka=null;ja=null;za=null;na&&na.remove();na=null;ea=false;xa=0;}function cb(){fa={};}function db(){if(r.hasAutoUpdateTest())return;if(ka)return;ka=setTimeout(function(){ka=null;kb();},oa.pollIntervalMS);}function eb(){if(oa&&ja&&oa.pollIntervalMS&&oa.pollIntervalMS>1000)db();}function fb(){ga=new t(k.find(ha,'a'),pb.bind(null),false,oa.bufferPixels);}function gb(){var sb=ca(window).y;return sb>oa.firstPagerScrollBuffer;}function hb(){if(gb()){fb();na&&na.remove();na=null;}}function ib(sb){var tb=k.find(ha,'a');m.listen(tb,'click',function(event){pb();na&&na.remove();na=null;event.preventDefault();});var ub=r.getVisibleStoryCount(la),vb=oa.maxStories;if(vb&&ub>=vb)return;if(sb&&!gb()){na=m.listen(window,'scroll',v(hb));}else fb();}function jb(){kb();g.inform(p.UPDATE_LAST_REFRESH_TIME);}function kb(){if(da||!ja)return;if(!r.hasAutoUpdateTest()&&!x.isActive(oa.newStoryIdleTime)){x.subscribeOnce(kb);return;}if(!r.canInsertNewerStories()&&!r.hasAutoUpdateTest()){db();return;}if(!za){var sb=o.div({style:{height:0,left:'-10000px',opacity:0,overflow:'hidden',position:'absolute',width:0}});za=k.getID(sb);k.prependContent(r.getStreamRoot(),sb);}var tb=o.div(null);k.prependContent(z(za),tb);w.loadFromEndpoint('LitestandNewerStoriesPagelet',tb,aa(ja,{cursor:ya,containerID:za}));}function lb(){var sb=k.getID(ha);h.addClass(ha,'async_saving');var tb=nb();if(fa[tb])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+tb);fa[tb]=tb;var ub={cursor:tb,preload_next_cursor:ta,pager_config:ia,pager_id:sb,scroll_count:++ma,start_unread_session:qa,start_continue_top_news_feed:ra};qa=false;ra=false;if(r.getHomeloadID())ub.homeload_id=r.getHomeloadID();w.loadFromEndpoint(oa.pagerController,k.getID(la),ub,{append:true,automatic:true,usePipe:true});}function mb(){return ob()[0].getAttribute('data-cursor');}function nb(){var sb=ob();sb=sb.filter(function(tb){return !tb.getAttribute('data-preload_unseen_story');});return sb[sb.length-1].getAttribute('data-cursor');}function ob(){var sb=k.scry(la,r.getStoriesSelector());return sb.filter(function(tb){return tb.getAttribute('data-cursor');});}function pb(){g.inform('FbFeedUnreadPillNavigation/startLoading');lb();ga&&ga.remove();ga=null;}function qb(){if(!sa)return [];var sb=k.scry(la,r.getStoriesSelector()),tb=sb.filter(function(wb){return wb.getAttribute('data-dedupekey')&&!h.hasClass(wb,"preloadUnseenStory");}),ub={};for(var vb=0;vb<tb.length;vb++)ub[tb[vb]]=1;return k.scry(sa,r.getStoriesSelector()).filter(function(wb){var xb=wb.getAttribute('data-dedupekey'),yb=xb&&!ub[xb];ub[xb]=1;return yb;});}var rb={register:function(sb,tb,ub,vb){ea||ab();oa=r.getStreamConfig(tb);ia=ub;la=z(sb);ya=mb();ha=vb;ib(true);eb();},replacePagerConfig:function(sb){ia=sb;},continueTopNewsFeed:function(){ra=true;cb();},removeOldPager:function(sb,tb){if(sb)k.remove(z(sb));h.show(z(tb));},removeLoadingIndicator:function(sb,tb){var ub=ba(sb);if(ub)k.remove(ub);h.show(tb);},moreStoriesInserted:function(sb){y.dedupeHide(r.getStreamRoot(),r.getStoriesSelector(),ua);g.inform(p.STORIES_INSERTED,{substream_id:sb});this.loadMoreUnseenStoriesIfNeeded();if(r.hideOffscreenSubstreams())q.attachSubstream(z(sb));},attachNewPager:function(sb){ha=sb;ha&&ib(false);},setPollerData:function(sb){if(sb){ja=sb;eb();}},updatePollerCursor:function(sb){ya=sb;eb();},headLoadCompleted:function(sb){ya=sb.newCursor;eb();var tb=sb.stories;if(tb&&tb.length>0){for(var ub=tb.length-1;ub>=0;ub--)tb[ub].setAttribute('data-insertion-position',--xa);g.inform('Stream/totalHeadLoadedStories',-xa);}},registerPreloadUnseenStories:function(sb,tb,ub,vb){sa=sb;ta=tb;ua=ub;wa=vb;rb.loadMoreUnseenStoriesIfNeeded();},morePreloadUnseenStories:function(sb,tb,ub){ta=ub;if(sb>0){k.appendContent(sa,tb);this.loadMoreUnseenStoriesIfNeeded();}else{g.inform('FbFeedUnreadPillNavigation/removePill');va=true;}},setStopRecursiveUnseenLoad:function(sb){va=sb;},loadMoreUnseenStoriesIfNeeded:function(){if(!wa||va)return;var sb=qb();if(sb.length<wa.min_num){if(!sa){g.inform('FbFeedUnreadPillNavigation/removePill');va=true;return;}w.loadFromEndpoint('LitestandUnseenStreamPagelet',sa,{unread_pill_config:wa,next_cursor:ta,mode:1},{append:true,automatic:true,usePipe:true});}else g.inform('FbFeedUnreadPillNavigation/enoughLoaded');}};e.exports=rb;});
__d("MercuryLeftNavCountControl",["Arbiter","CSS","DOM","MercuryThreadlistConstants","MessagingTag","copyProperties","MercuryThreadInformer","MercuryUnreadState"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('MercuryThreadInformer').get(),n=b('MercuryUnreadState').get(),o,p,q=function(r,s){o=r;p=s;this.render();this.listenerToken=m.subscribe('unread-updated',this.render.bind(this));this.subscriptions=[g.subscribe('onload/exit',this.cleanup.bind(this))];};l(q.prototype,{render:function(){var r=n.exceedsMaxCount(k.INBOX);if(r){i.setContent(o,j.MAX_UNREAD_COUNT);}else{var s=n.getUnreadCount(k.INBOX);i.setContent(o,s.toString());h.conditionClass(o.parentNode,'hidden_elem',s<=0);}i.setContent(p,r?'+':'');},cleanup:function(){this.subscriptions.forEach(g.unsubscribe);m.unsubscribe(this.listenerToken);}});e.exports=q;});
__d("MercuryLeftNav",["DOM","MercuryLeftNavCountControl","MercuryServerRequests"],function(a,b,c,d,e,f,g,h){var i=b('MercuryServerRequests').get();function j(k,l){i.handleUpdate(l);var m=g.scry(k,'span.countValue')[0],n=g.scry(k,'span.maxCountIndicator')[0];new h(m,n);}e.exports=j;});
__d("collectSubtreeData",[],function(a,b,c,d,e,f){function g(i,j,k,l,m){if(i.offsetWidth===0&&i.offsetHeight===0)return m;var n={};if(i.getAttribute)for(r=0;r<j.length;r++){t=j[r];var o=i.getAttribute(k[t]);if(o){n[t]={};var p=JSON.parse(o);for(var q in l)if(p[q]!==undefined){n[t][q]=true;if(m[t]===undefined)m[t]={};if(m[t][q]===undefined)m[t][q]=[];if(l[q].length>0)m[t][q].push(l[q]);m[t][q].push('('+p[q]);}}}for(var r=0;r<i.childNodes.length;r++){var s=i.childNodes[r];g(s,j,k,l,m);}for(var t in n)for(var u in n[t]){var v=m[t][u][m[t][u].length-1];if(v.length>0&&v.charAt(0)=='('){m[t][u][m[t][u].length-1]=v.substr(1);}else m[t][u].push(')');}return m;}function h(i,j){var k={};for(var l=0;l<j.length;++l)k[j[l]]='data-'+j[l];var m={tn:"","tn-debug":","},n={};g(i,j,k,m,n);for(var o in n)for(var p in n[o])n[o][p]=n[o][p].join('');return n;}e.exports=h;});
__d("recordTNTreeData",["collectSubtreeData"],function(a,b,c,d,e,f,g){function h(i,j){var k={},l=g(i,['ft']);for(var m in l.ft){k[m+'_tree']=l.ft[m];if(m==='tn-debug')i.setAttribute('tn-debug_subtree',l.ft[m]);}k.evt_value=i.offsetHeight;if(j)k.offset=Math.max(0,i.offsetTop-j.offsetTop);return k;}e.exports=h;});
__d("StoryTopicMap",[],function(a,b,c,d,e,f){var g={},h={registerTopics:function(i,j){g[i]=j;},getTopicsForFTID:function(i){return g[i]||[];}};e.exports=h;});
__d("XFeedAdsChainingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/feed\/ads_chaining\/",{actor_id:{type:"Int",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});});
__d("XPubcontentFeedChainingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"Int",required:true},ft_id:{type:"String"},origin:{type:"String",required:true}});});
__d("XPubcontentRelatedShareChainingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"}});});
__d("XPubcontentTopicChainingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/pubcontent\/topic_chaining\/",{pivotal_topic_ids:{type:"IntVector"}});});
__d("XPubcontentInlineStoryPivotChainingControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});});
__d("PubcontentFeedChainingController",["AggregatedLinkComposerConfig","Arbiter","AsyncRequest","AttachmentRelatedShareConstants","CSS","cx","DOM","DOMQuery","FeedAdsChainingConfig","PageAdsAttachmentLinkShareConstants","PageLikeButton","PubcontentFeedChainingConfig","PubcontentRelatedShareChainingConfig","PubcontentTopicChainingConfig","StoryInlinePivotChainingConfig","StoryTopicMap","UFIFeedbackTargets","UFIUIEvents","XFeedAdsChainingControllerURIBuilder","XPubcontentFeedChainingControllerURIBuilder","XPubcontentRelatedShareChainingControllerURIBuilder","XPubcontentTopicChainingControllerURIBuilder","XPubcontentInlineStoryPivotChainingControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){var da='ei',ea='ad_fan_page_action',fa='ad_like_page_post_action',ga='ad_share_attachment_click_action',ha='page_story_like_action',ia='related_share_article_click',ja='related_share_video_click',ka='page_share_like_action',la='topic_story_like_action',ma='story_click_for_pivot_action',na='story_like_pivot_action';function oa(){"use strict";this.$PubcontentFeedChainingController0=r;this.$PubcontentFeedChainingController1=o;this.$PubcontentFeedChainingController2=s;this.$PubcontentFeedChainingController3=t;this.$PubcontentFeedChainingController4=u;this.$PubcontentFeedChainingController5={};h.subscribe(q.LIKED,this.$PubcontentFeedChainingController6.bind(this));h.subscribe(x.UFIActionLinkLike,this.$PubcontentFeedChainingController7.bind(this));h.subscribe(j.ARTICLE_CLICK,this.$PubcontentFeedChainingController8.bind(this));h.subscribe(j.VIDEO_CLICK,this.$PubcontentFeedChainingController9.bind(this));h.subscribe(p.LINK_ATTACHMENT_CLICK,this.$PubcontentFeedChainingControllera.bind(this));h.subscribe(j.PHOTO_CLICK,this.$PubcontentFeedChainingControllerb.bind(this));oa.instance=this;}oa.getAdClientTokenIndex=function(){"use strict";return da;};oa.prototype.$PubcontentFeedChainingController6=function(pa,qa){"use strict";var ra=this.findAdClientToken(qa.target);if(ra){this.$PubcontentFeedChainingControllerc(qa.target,{origin:ea,actor_id:qa.profile_id,client_token:ra});}else this.$PubcontentFeedChainingControllerd(qa.target,{origin:qa.origin,actor_id:qa.profile_id});};oa.prototype.$PubcontentFeedChainingController7=function(pa,qa){"use strict";if(!qa.ft_id)return;w.getFeedbackTarget(qa.ft_id,function(ra,sa){var ta=this.findAdClientToken(ra);if(ta&&sa.isshare){this.$PubcontentFeedChainingControllerc(ra,{actor_id:sa.actorid,origin:fa,ft_id:sa.entidentifier,client_token:ta});}else if(sa.isownerpage){this.$PubcontentFeedChainingControllerd(ra,{actor_id:sa.actorid,origin:ha});}else if(sa.isshare){this.$PubcontentFeedChainingControllerd(ra,{actor_id:sa.actorid,ft_id:sa.entidentifier,origin:ka});}else{var ua=v.getTopicsForFTID(sa.entidentifier);if(ua&&ua.length>0){this.$PubcontentFeedChainingControllere(ra,{ft_id:sa.entidentifier,origin:la,pivotal_topic_ids:ua});}else this.$PubcontentFeedChainingControllerf(ra,{origin:na,ft_id:sa.entidentifier});}}.bind(this,qa.target));};oa.prototype.$PubcontentFeedChainingControllerf=function(pa,qa){"use strict";var ra=this.$PubcontentFeedChainingControllerg(pa,qa);if(!ra)return false;var sa=(new ca()).setString('origin',qa.origin);if(qa.story_id)sa.setString('storyid',String(qa.story_id));if(qa.ft_id)sa.setString('ftid',String(qa.ft_id));new i().setErrorHandler(this.$PubcontentFeedChainingControllerh.bind(this,ra.story.id)).setRelativeTo(ra.chainingWrapper).setURI(sa.getURI()).setAllowCrossPageTransition(true).send();return true;};oa.prototype.$PubcontentFeedChainingControllerb=function(pa,qa){"use strict";var ra=this;ra.$PubcontentFeedChainingControllerf(qa.attachment,{origin:ma,story_id:qa.storyid});};oa.prototype.$PubcontentFeedChainingController8=function(pa,qa){"use strict";if(g.no_chained_related_stories==='true')return;qa.origin=ia;var ra=this,sa=this.findStory(qa.attachment),ta=n.scry(n.getRootElement(),'#initial_browse_result').length>0;if(ta)return;var ua;if(qa.is_right_click){ua=0;}else ua=j.EVENT_DELAY;setTimeout(function(){if(sa){var va=ra.findAttachment(sa);if(va)qa.attachment=va;}ra.$PubcontentFeedChainingControlleri(qa.attachment,qa);},ua);};oa.prototype.$PubcontentFeedChainingController9=function(pa,qa){"use strict";qa.origin=ja;var ra=this,sa=this.findStory(qa.attachment);setTimeout(function(){if(sa){var ta=ra.findAttachment(sa);if(ta)qa.attachment=ta;}ra.$PubcontentFeedChainingControlleri(qa.attachment,qa);},j.EVENT_DELAY);};oa.prototype.$PubcontentFeedChainingControllera=function(pa,qa){"use strict";var ra=this.findAdClientToken(qa.attachment);if(ra){qa.origin=ga;qa.client_token=ra;this.$PubcontentFeedChainingControllerc(qa.attachment,qa);}};oa.prototype.$PubcontentFeedChainingControllerj=function(pa){"use strict";return !!(pa&&pa.id&&!k.hasClass(pa,"_sf6")&&!(pa.id in this.$PubcontentFeedChainingController5));};oa.prototype.$PubcontentFeedChainingControllerk=function(pa){"use strict";if(!pa)return false;if(pa.origin in this.$PubcontentFeedChainingController0||pa.origin in this.$PubcontentFeedChainingController2||pa.origin in this.$PubcontentFeedChainingController1||pa.origin in this.$PubcontentFeedChainingController4){return true;}else{var qa=this.$PubcontentFeedChainingController3[pa.origin];if(!qa||!qa.rate)return false;var ra=Math.random();if(ra>qa.rate)return false;return true;}};oa.prototype.$PubcontentFeedChainingControllerl=function(pa){"use strict";this.$PubcontentFeedChainingController5[pa]=true;};oa.prototype.$PubcontentFeedChainingControllerh=function(pa){"use strict";delete this.$PubcontentFeedChainingController5[pa];};oa.prototype.$PubcontentFeedChainingControllerg=function(pa,qa){"use strict";var ra=this.findStory(pa);if(!this.$PubcontentFeedChainingControllerj(ra))return null;if(!this.$PubcontentFeedChainingControllerk(qa))return null;this.$PubcontentFeedChainingControllerl(ra.id);if(this.isSponsoredStory(ra))return null;var sa;if(!qa.continued_chaining){sa=this.findContainer(ra);if(!sa)return null;var ta=m.create('div'),ua=m.appendContent(sa,ta);if(ua.length!==1)return null;}else{sa=ra;ta=m.create('div');ua=m.insertAfter(sa,ta);m.remove(sa);if(ua.length!==1)return null;}return {chainingWrapper:ua[0],story:ra};};oa.prototype.$PubcontentFeedChainingControllerc=function(pa,qa){"use strict";var ra=this.$PubcontentFeedChainingControllerg(pa,qa);if(!ra)return false;var sa=this.findStreamRoot(ra.story);if(!sa)return false;var ta=sa.getAttribute('id'),ua=(new y()).setInt('actor_id',qa.actor_id).setString('origin',qa.origin).setString('ei',qa.client_token).setString('data_ownerid',ta);if(qa.ft_id)ua.setString('ft_id',qa.ft_id);new i().setErrorHandler(this.$PubcontentFeedChainingControllerh.bind(this,ra.story.id)).setRelativeTo(ra.chainingWrapper).setURI(ua.getURI()).send();return true;};oa.prototype.$PubcontentFeedChainingControlleri=function(pa,qa){"use strict";var ra=this.$PubcontentFeedChainingControllerg(pa,qa);if(!ra)return false;var sa=(new aa()).setInt('global_share_id',qa.global_share_id).setString('attachment_div_id',m.getID(qa.attachment));if(qa.link_url)sa.setString('link_url',qa.link_url);if(qa.video_div_id)sa.setString('video_div_id',qa.video_div_id);if(qa.share_id)sa.setString('share_id',qa.share_id);var ta=JSON.parse(ra.story.getAttribute('data-ft'))||{};if('qid' in ta&&'mf_story_key' in ta){sa.setString('qid',ta.qid);sa.setString('mf_story_key',ta.mf_story_key);}var ua=new i().setErrorHandler(this.$PubcontentFeedChainingControllerh.bind(this,ra.story.id)).setRelativeTo(ra.chainingWrapper).setURI(sa.getURI());ta&&ua.setData(ta);ua.send();return true;};oa.prototype.$PubcontentFeedChainingControllerd=function(pa,qa){"use strict";var ra=this.$PubcontentFeedChainingControllerg(pa,qa);if(!ra)return false;var sa=(new z()).setInt('actor_id',qa.actor_id).setString('origin',qa.origin);if(qa.ft_id)sa.setString('ft_id',qa.ft_id);new i().setErrorHandler(this.$PubcontentFeedChainingControllerh.bind(this,ra.story.id)).setRelativeTo(ra.chainingWrapper).setURI(sa.getURI()).send();return true;};oa.prototype.$PubcontentFeedChainingControllere=function(pa,qa){"use strict";var ra=this.$PubcontentFeedChainingControllerg(pa,qa);if(!ra)return false;var sa=(new ba()).setIntVector('pivotal_topic_ids',qa.pivotal_topic_ids).getURI();new i().setErrorHandler(this.$PubcontentFeedChainingControllerh.bind(this,ra.story.id)).setRelativeTo(ra.chainingWrapper).setURI(sa).send();return true;};e.exports=oa;});
__d("PubcontentLitestandClassicChainingController",["ContextualThing","DOM","PubcontentFeedChainingController","csx"],function(a,b,c,d,e,f,g,h,i,j){for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(){"use strict";if(i!==null)i.apply(this,arguments);}m.prototype.findStory=function(n){"use strict";var o="^div._4-u2",p=h.scry(n,o);return p.length===1?p[0]:null;};m.prototype.isSponsoredStory=function(n){"use strict";var o="._5paw";return h.scry(n,o).length>0;};m.prototype.findAttachment=function(n){"use strict";var o="div._6m2",p="div.iframeEmbed",q=h.scry(n,o)[0]||h.scry(n,p)[0];return q;};m.prototype.findContainer=function(n){"use strict";var o=h.create('div'),p=h.insertAfter(n,o);g.register(o,n);return p.length>=1?p[0]:null;};m.prototype.findStreamRoot=function(n){"use strict";var o="^div._4ikz";return h.scry(n,o)[0];};m.prototype.findAdClientToken=function(n){"use strict";var o=this.findStory(n);if(!o)return null;var p=o.getAttribute('data-ft');if(!p)return null;var q=JSON.parse(p);return q[i.getAdClientTokenIndex()];};e.exports=m;new m();});
__d("StoryPositionTracking",["DOM","LitestandStream","csx","ge"],function(a,b,c,d,e,f,g,h,i,j){var k=0;function l(o,p){var q=JSON.parse(o.getAttribute('data-ft'));q.insertion_position=p;o.setAttribute('data-ft',JSON.stringify(q));}function m(o){return g.scry(o,"._5jmm");}var n={registerNewStories:function(o){if(o=='substream_0')k=0;var p=m(j(o)),q=p.length;for(var r=0;r<q;r++)l(p[r],k++);},updateAllStories:function(){var o=m(h.getStreamRoot()),p=o.length;k=0;for(var q=0;q<p;q++)l(o[q],k++);}};e.exports=n;});
__d("StreamViewportTracking",["DOM","DOMDimensions","ViewportTracking","ge","recordTNTreeData"],function(a,b,c,d,e,f,g,h,i,j,k){var l=51;for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";if(i!==null)i.apply(this,arguments);}o.prototype.init=function(p,q){"use strict";if(q)this.$StreamViewportTracking0=q;n.init.call(this,p);this.initSubscriptions();};o.prototype.initSubscriptions=function(){"use strict";};o.prototype.getDataFromConfig=function(p){"use strict";this.recordTNTree=p.record_tn_tree;this.timeout=p.record_delay;this.isTimetrackingEnabled=!!p.is_timetracking_enabled;};o.prototype.getTimeout=function(){"use strict";return this.timeout;};o.prototype.getStorySelector=function(){"use strict";return '.uiStreamStory';};o.prototype.getAllStories=function(){"use strict";var p=g.scry(this.getStream(),this.getStorySelector());return p.filter(function(q){return q.getAttribute('data-ft');});};o.prototype.getStoryID=function(p){"use strict";var q=JSON.parse(p.getAttribute('data-ft'));return q.mf_story_key;};o.prototype.getDataToLog=function(p){"use strict";var q={};if(this.recordTNTree){var r=this.getStream();q=k(p,r);var s=p.getAttribute('data-insertion-position');if(s!==null)q.inspos=s;}q.evt=l;q.vpv_time=Math.round(Date.now()/1000);var t=g.scry(p,".fbStoryAttachmentImage")[0];if(t){var u=h.getElementDimensions(t);q.story_image_height=u.height;q.story_image_width=u.width;}return {ft:q};};o.prototype.getStream=function(){"use strict";if(this.$StreamViewportTracking0)return this.$StreamViewportTracking0;return j('home_stream');};o.init=function(p,q){"use strict";o.instance=new o();o.instance.init(p,q);};o.getInstance=function(){"use strict";return o.instance;};e.exports=o;});
__d("FbFeedAttachmentRelatedShare",["Arbiter","AttachmentRelatedShareConstants","DOM","Event","tidyEvent","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={loadRelatedAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.ARTICLE_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedVideoAttachment:function(n,o){k(j.listen(n,'click',function(){g.inform(h.VIDEO_CLICK,{attachment:n,global_share_id:o});}));},loadRelatedAttachmentForStream:function(n){var o=function(event,p){var q=event.getTarget();if(q.getAttribute('target')!=='_blank')return;var r="^div._5pbx",s="^div._5pc9",t=i.scry(q,r)[0]||i.scry(q,s)[0];if(!t)return;g.inform(h.ARTICLE_CLICK,{attachment:t,global_share_id:0,link_url:q.getAttribute('href'),is_right_click:p});};k(j.listen(n,'click',function(event){o(event,false);}));k(j.listen(n,'mousedown',function(event){if(event.which==3||event.button==2)o(event,true);}));},closeButton:function(n,o){k(j.listen(n,'click',function(){i.remove(o);}));}};e.exports=m;});
__d("FbFeedKeyboardController",["CSS","DOM","DOMQuery","FeedBaseKeyboardController","JSXDOM","Parent","csx","cx","ge","getActiveElement"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(v){if(v.previousElementSibling)return v.previousElementSibling;v=v.previousSibling;while(v&&!h.isElementNode(v))v=v.previousSibling;return v||null;}function r(v){if(v.nextElementSibling)return v.nextElementSibling;v=v.nextSibling;while(v&&!h.isElementNode(v))v=v.nextSibling;return v||null;}for(var s in j)if(j.hasOwnProperty(s))u[s]=j[s];var t=j===null?null:j.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=j;function u(){"use strict";if(j!==null)j.apply(this,arguments);}u.prototype.getStories=function(v){"use strict";return h.scry(v||this.root,"._5jmm");};u.prototype.isHoldoutStory=function(v){"use strict";return !!v&&g.hasClass(v,'holdoutAdStory');};u.prototype.isRelevantStory=function(v){"use strict";return i.isElementNode(v)&&!this.isHoldoutStory(v);};u.prototype.isStory=function(v){"use strict";return g.hasClass(v,"_5jmm");};u.prototype.clickLike=function(){"use strict";this.click('.UFILikeLink');var v=this.getParentStory(p());h.find(v,'.UFILikeLink').focus();};u.prototype.clickComment=function(){"use strict";this.click('.comment_link');};u.prototype.clickShare=function(){"use strict";this.click('.share_action_link');};u.prototype.clickSeeMore=function(){"use strict";this.click('.see_more_link');};u.prototype.openAttachment=function(){"use strict";this.click("._5dec","a._52c6","._4-eo",'.uiVideoThumb');};u.prototype.getHeadline=function(v){"use strict";return i.scry(v,"h5._5pbw")[0];};u.prototype.getPreviousSibling=function(v){"use strict";var w=q(v);if(w&&this.getParentStory(w))return w;w=null;var x=l.byClass(v,"_5pcb");if(x){var y=h.scry(x,"._5jmm"),z=y.indexOf(v);if(z===0){w=o('pagelet_composer');w=w&&l.byClass(w,"_5jmm");}else if(z>0)w=y[z-1];}return w||this.selected;};u.prototype.getPreviousStory=function(v){"use strict";var w=this.getPreviousSibling(v);while(w&&!this.isStory(w))w=this.getPreviousSibling(w);return w;};u.prototype.getParentStory=function(v){"use strict";return l.byClass(v,"_5jmm");};u.prototype.getNextSibling=function(v){"use strict";var w=r(v);if(w&&this.getParentStory(w))return w;w=null;var x=l.byClass(v,"_5pcb");if(x){var y=h.scry(x,"._5jmm"),z=y.indexOf(v);if(z>-1)w=y[z+1];}else if(o('pagelet_composer',v))w=h.scry(document,"div._5pcb ._5jmm")[0];return w||this.selected;};u.prototype.getNextStory=function(v){"use strict";var w=this.getNextSibling(v);while(w&&!this.isStory(w))w=this.getNextSibling(w);return w;};u.prototype.setSelected=function(v,w){"use strict";if(v){var x="_5qdu",y=i.scry(v,"._5qdu");if(!y.length&&w)h.prependContent(v,k.div({className:x}));}if(w){this.selected&&this.setTabindexOnStory(this.selected,'-1');this.selected&&g.removeClass(this.selected,"_5qdv");this.selected=v;v&&this.setTabindexOnStory(v,'0');v&&g.addClass(v,"_5qdv");}};u.init=function(v){"use strict";new u(v);};e.exports=u;});
__d("FbFeedViewportTracking",["Arbiter","LitestandMessages","LitestandStream","StreamViewportTracking","csx"],function(a,b,c,d,e,f,g,h,i,j,k){for(var l in j)if(j.hasOwnProperty(l))n[l]=j[l];var m=j===null?null:j.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=j;function n(){"use strict";if(j!==null)j.apply(this,arguments);}n.prototype.initSubscriptions=function(){"use strict";this.subscriptions.addSubscriptions(g.subscribe([h.STORIES_INSERTED,h.STORIES_REMOVED],this.invalidateAllStoriesCache.bind(this)),g.subscribe(h.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};n.prototype.getStorySelector=function(){"use strict";return "._5jmm";};n.prototype.getStream=function(){"use strict";return i.getStreamRoot();};n.init=function(o){"use strict";new n().init(o);};e.exports=n;});
__d("MenuTogglingItem",["DOM","MenuItem"],function(a,b,c,d,e,f,g,h){for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";if(h!==null)h.apply(this,arguments);}k.prototype.handleClick=function(){"use strict";this.toggleMenuItem();return j.handleClick.call(this);};k.prototype.toggleMenuItem=function(){"use strict";this._swap('ajaxify','toggleAjaxify');this._swap('value','toggleValue');this._toggleItemText();};k.prototype.setValue=function(l){"use strict";this._data.value=l;};k.prototype._toggleItemText=function(){"use strict";var l=this._anchor;this._swap('markup','toggleMarkup');g.replace(l,this._renderItemContent());};k.prototype._swap=function(l,m){"use strict";var n=this._data[l];this._data[l]=this._data[m];this._data[m]=n;};e.exports=k;});